var x,d,W,P,F,H,E={},O=[],Y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function k(t,e1){for(var n in e1)t[n]=e1[n];return t}function R(t){var e2=t.parentNode;e2&&e2.removeChild(t)}function Z(t,e3,n){var o,l1,_,s1={};for(_ in e3)_=="key"?o=e3[_]:_=="ref"?l1=e3[_]:s1[_]=e3[_];if(arguments.length>2&&(s1.children=arguments.length>3?x.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)s1[_]===void 0&&(s1[_]=t.defaultProps[_]);return S(t,s1,o,l1,null)}function S(t,e4,n,o,l2){var _={type:t,props:e4,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l2??++W};return l2==null&&d.vnode!=null&&d.vnode(_),_}function U(t){return t.children}function D(t,e5){this.props=t,this.context=e5}function C(t,e6){if(e6==null)return t.__?C(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e6<t.__k.length;e6++)if((n=t.__k[e6])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?C(t):null}function B(t){var e7,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e7=0;e7<t.__k.length;e7++)if((n=t.__k[e7])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return B(t)}}function L(t){(!t.__d&&(t.__d=!0)&&P.push(t)&&!T.__r++||H!==d.debounceRendering)&&((H=d.debounceRendering)||F)(T)}function T(){for(var t;T.__r=P.length;)t=P.sort((function(e8,n){return e8.__v.__b-n.__v.__b})),P=[],t.some((function(e9){var n,o,l3,_,s2,u1;e9.__d&&(s2=(_=(n=e9).__v).__e,(u1=n.__P)&&(o=[],(l3=k({},_)).__v=_.__v+1,M(u1,_,l3,n.__n,u1.ownerSVGElement!==void 0,_.__h!=null?[s2]:null,o,s2??C(_),_.__h),J(o,_),_.__e!=s2&&B(_)))}))}function $(t,e10,n,o,l4,_,s3,u2,p1,a1){var r,h1,c1,i1,f,b1,v2,y1=o&&o.__k||O,m1=y1.length;for(n.__k=[],r=0;r<e10.length;r++)if((i1=n.__k[r]=(i1=e10[r])==null||typeof i1=="boolean"?null:typeof i1=="string"||typeof i1=="number"||typeof i1=="bigint"?S(null,i1,null,null,i1):Array.isArray(i1)?S(U,{children:i1},null,null,null):i1.__b>0?S(i1.type,i1.props,i1.key,null,i1.__v):i1)!=null){if(i1.__=n,i1.__b=n.__b+1,(c1=y1[r])===null||c1&&i1.key==c1.key&&i1.type===c1.type)y1[r]=void 0;else for(h1=0;h1<m1;h1++){if((c1=y1[h1])&&i1.key==c1.key&&i1.type===c1.type){y1[h1]=void 0;break}c1=null}M(t,i1,c1=c1||E,l4,_,s3,u2,p1,a1),f=i1.__e,(h1=i1.ref)&&c1.ref!=h1&&(v2||(v2=[]),c1.ref&&v2.push(c1.ref,null,i1),v2.push(h1,i1.__c||f,i1)),f!=null?(b1==null&&(b1=f),typeof i1.type=="function"&&i1.__k===c1.__k?i1.__d=p1=V(i1,p1,t):p1=j(t,i1,c1,y1,f,p1),typeof n.type=="function"&&(n.__d=p1)):p1&&c1.__e==p1&&p1.parentNode!=t&&(p1=C(c1))}for(n.__e=b1,r=m1;r--;)y1[r]!=null&&(typeof n.type=="function"&&y1[r].__e!=null&&y1[r].__e==n.__d&&(n.__d=C(o,r+1)),Q(y1[r],y1[r]));if(v2)for(r=0;r<v2.length;r++)K(v2[r],v2[++r],v2[++r])}function V(t,e11,n){for(var o,l5=t.__k,_=0;l5&&_<l5.length;_++)(o=l5[_])&&(o.__=t,e11=typeof o.type=="function"?V(o,e11,n):j(n,o,o,l5,o.__e,e11));return e11}function j(t,e12,n,o,l6,_){var s4,u3,p2;if(e12.__d!==void 0)s4=e12.__d,e12.__d=void 0;else if(n==null||l6!=_||l6.parentNode==null)e:if(_==null||_.parentNode!==t)t.appendChild(l6),s4=null;else{for(u3=_,p2=0;(u3=u3.nextSibling)&&p2<o.length;p2+=2)if(u3==l6)break e;t.insertBefore(l6,_),s4=_}return s4!==void 0?s4:l6.nextSibling}function te(t,e13,n,o,l7){var _;for(_ in n)_==="children"||_==="key"||_ in e13||N(t,_,null,n[_],o);for(_ in e13)l7&&typeof e13[_]!="function"||_==="children"||_==="key"||_==="value"||_==="checked"||n[_]===e13[_]||N(t,_,e13[_],n[_],o)}function z(t,e14,n){e14[0]==="-"?t.setProperty(e14,n):t[e14]=n==null?"":typeof n!="number"||Y.test(e14)?n:n+"px"}function N(t,e15,n,o,l8){var _;e:if(e15==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e15 in o)n&&e15 in n||z(t.style,e15,"");if(n)for(e15 in n)o&&n[e15]===o[e15]||z(t.style,e15,n[e15])}else if(e15[0]==="o"&&e15[1]==="n")_=e15!==(e15=e15.replace(/Capture$/,"")),e15=e15.toLowerCase()in t?e15.toLowerCase().slice(2):e15.slice(2),t.l||(t.l={}),t.l[e15+_]=n,n?o||t.addEventListener(e15,_?q:G,_):t.removeEventListener(e15,_?q:G,_);else if(e15!=="dangerouslySetInnerHTML"){if(l8)e15=e15.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e15!=="href"&&e15!=="list"&&e15!=="form"&&e15!=="tabIndex"&&e15!=="download"&&e15 in t)try{t[e15]=n??"";break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e15[0]==="a"&&e15[1]==="r")?t.setAttribute(e15,n):t.removeAttribute(e15))}}function G(t){this.l[t.type+!1](d.event?d.event(t):t)}function q(t){this.l[t.type+!0](d.event?d.event(t):t)}function M(t,e16,n,o,l9,_,s5,u4,p3){var a2,r,h2,c2,i2,f,b2,v3,y2,m2,w,g1=e16.type;if(e16.constructor!==void 0)return null;n.__h!=null&&(p3=n.__h,u4=e16.__e=n.__e,e16.__h=null,_=[u4]),(a2=d.__b)&&a2(e16);try{e:if(typeof g1=="function"){if(v3=e16.props,y2=(a2=g1.contextType)&&o[a2.__c],m2=a2?y2?y2.props.value:a2.__:o,n.__c?b2=(r=e16.__c=n.__c).__=r.__E:("prototype"in g1&&g1.prototype.render?e16.__c=r=new g1(v3,m2):(e16.__c=r=new D(v3,m2),r.constructor=g1,r.render=_e),y2&&y2.sub(r),r.props=v3,r.state||(r.state={}),r.context=m2,r.__n=o,h2=r.__d=!0,r.__h=[]),r.__s==null&&(r.__s=r.state),g1.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=k({},r.__s)),k(r.__s,g1.getDerivedStateFromProps(v3,r.__s))),c2=r.props,i2=r.state,h2)g1.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(g1.getDerivedStateFromProps==null&&v3!==c2&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(v3,m2),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(v3,r.__s,m2)===!1||e16.__v===n.__v){r.props=v3,r.state=r.__s,e16.__v!==n.__v&&(r.__d=!1),r.__v=e16,e16.__e=n.__e,e16.__k=n.__k,e16.__k.forEach((function(A1){A1&&(A1.__=e16)})),r.__h.length&&s5.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(v3,r.__s,m2),r.componentDidUpdate!=null&&r.__h.push((function(){r.componentDidUpdate(c2,i2,f)}))}r.context=m2,r.props=v3,r.state=r.__s,(a2=d.__r)&&a2(e16),r.__d=!1,r.__v=e16,r.__P=t,a2=r.render(r.props,r.state,r.context),r.state=r.__s,r.getChildContext!=null&&(o=k(k({},o),r.getChildContext())),h2||r.getSnapshotBeforeUpdate==null||(f=r.getSnapshotBeforeUpdate(c2,i2)),w=a2!=null&&a2.type===U&&a2.key==null?a2.props.children:a2,$(t,Array.isArray(w)?w:[w],e16,n,o,l9,_,s5,u4,p3),r.base=e16.__e,e16.__h=null,r.__h.length&&s5.push(r),b2&&(r.__E=r.__=null),r.__e=!1}else _==null&&e16.__v===n.__v?(e16.__k=n.__k,e16.__e=n.__e):e16.__e=ne(n.__e,e16,n,o,l9,_,s5,p3);(a2=d.diffed)&&a2(e16)}catch(A2){e16.__v=null,(p3||_!=null)&&(e16.__e=u4,e16.__h=!!p3,_[_.indexOf(u4)]=null),d.__e(A2,e16,n)}}function J(t,e17){d.__c&&d.__c(e17,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(o){o.call(n)}))}catch(o){d.__e(o,n.__v)}}))}function ne(t,e18,n,o,l10,_,s6,u5){var p4,a3,r,h3=n.props,c3=e18.props,i3=e18.type,f=0;if(i3==="svg"&&(l10=!0),_!=null){for(;f<_.length;f++)if((p4=_[f])&&"setAttribute"in p4==!!i3&&(i3?p4.localName===i3:p4.nodeType===3)){t=p4,_[f]=null;break}}if(t==null){if(i3===null)return document.createTextNode(c3);t=l10?document.createElementNS("http://www.w3.org/2000/svg",i3):document.createElement(i3,c3.is&&c3),_=null,u5=!1}if(i3===null)h3===c3||u5&&t.data===c3||(t.data=c3);else{if(_=_&&x.call(t.childNodes),a3=(h3=n.props||E).dangerouslySetInnerHTML,r=c3.dangerouslySetInnerHTML,!u5){if(_!=null)for(h3={},f=0;f<t.attributes.length;f++)h3[t.attributes[f].name]=t.attributes[f].value;(r||a3)&&(r&&(a3&&r.__html==a3.__html||r.__html===t.innerHTML)||(t.innerHTML=r&&r.__html||""))}if(te(t,c3,h3,l10,u5),r)e18.__k=[];else if(f=e18.props.children,$(t,Array.isArray(f)?f:[f],e18,n,o,l10&&i3!=="foreignObject",_,s6,_?_[0]:n.__k&&C(n,0),u5),_!=null)for(f=_.length;f--;)_[f]!=null&&R(_[f]);u5||("value"in c3&&(f=c3.value)!==void 0&&(f!==h3.value||f!==t.value||i3==="progress"&&!f)&&N(t,"value",f,h3.value,!1),"checked"in c3&&(f=c3.checked)!==void 0&&f!==t.checked&&N(t,"checked",f,h3.checked,!1))}return t}function K(t,e19,n){try{typeof t=="function"?t(e19):t.current=e19}catch(o){d.__e(o,n)}}function Q(t,e20,n){var o,l11;if(d.unmount&&d.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||K(o,null,e20)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){d.__e(_,e20)}o.base=o.__P=null}if(o=t.__k)for(l11=0;l11<o.length;l11++)o[l11]&&Q(o[l11],e20,typeof t.type!="function");n||t.__e==null||R(t.__e),t.__e=t.__d=void 0}function _e(t,e,n){return this.constructor(t,n)}function re(t,e21,n){var o,l12,_;d.__&&d.__(t,e21),l12=(o=typeof n=="function")?null:n&&n.__k||e21.__k,_=[],M(e21,t=(!o&&n||e21).__k=Z(U,null,[t]),l12||E,E,e21.ownerSVGElement!==void 0,!o&&n?[n]:l12?null:e21.firstChild?x.call(e21.childNodes):null,_,!o&&n?n:l12?l12.__e:e21.firstChild,o),J(_,t)}x=O.slice,d={__e:function(t,e22){for(var n,o,l13;e22=e22.__;)if((n=e22.__c)&&!n.__)try{if((o=n.constructor)&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),l13=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t),l13=n.__d),l13)return n.__E=n}catch(_){t=_}throw t}},W=0,D.prototype.setState=function(t,e23){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=k({},this.state),typeof t=="function"&&(t=t(k({},n),this.props)),t&&k(n,t),t!=null&&this.__v&&(e23&&this.__h.push(e23),L(this))},D.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),L(this))},D.prototype.render=U,P=[],F=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,T.__r=0,0;var u=0;function v(n,s7,l14,a4,f){var r,o,_={};for(o in s7)o=="ref"?r=s7[o]:_[o]=s7[o];var e24={type:n,props:_,key:l14,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--u,__source:a4,__self:f};if(typeof n=="function"&&(r=n.defaultProps))for(o in r)_[o]===void 0&&(_[o]=r[o]);return d.vnode&&d.vnode(e24),e24}var c,e,l,i=0,h=[],p=d.__b,H1=d.__r,d1=d.diffed,b=d.__c,y=d.unmount;function a(_,n){d.__h&&d.__h(e,_,i||n),i=0;var t=e.__H||(e.__H={__:[],__h:[]});return _>=t.__.length&&t.__.push({}),t.__[_]}function F1(_){return i=1,q1(A,_)}function q1(_,n,t){var u6=a(c++,2);return u6.t=_,u6.__c||(u6.__=[t?t(n):A(void 0,n),function(o){var f=u6.t(u6.__[0],o);u6.__[0]!==f&&(u6.__=[f,u6.__[1]],u6.__c.setState({}))}],u6.__c=e),u6.__}function T1(_,n){var t=a(c++,3);!d.__s&&m(t.__H,n)&&(t.__=_,t.__H=n,e.__H.__h.push(t))}function x1(){var _;for(h.sort((function(n,t){return n.__v.__b-t.__v.__b}));_=h.pop();)if(_.__P)try{_.__H.__h.forEach(s),_.__H.__h.forEach(v1),_.__H.__h=[]}catch(n){_.__H.__h=[],d.__e(n,_.__v)}}d.__b=function(_){e=null,p&&p(_)},d.__r=function(_){H1&&H1(_),c=0;var n=(e=_.__c).__H;n&&(n.__h.forEach(s),n.__h.forEach(v1),n.__h=[])},d.diffed=function(_){d1&&d1(_);var n=_.__c;n&&n.__H&&n.__H.__h.length&&(h.push(n)!==1&&l===d.requestAnimationFrame||((l=d.requestAnimationFrame)||function(t){var u7,o=function(){clearTimeout(f),g&&cancelAnimationFrame(u7),setTimeout(t)},f=setTimeout(o,100);g&&(u7=requestAnimationFrame(o))})(x1)),e=null},d.__c=function(_,n){n.some((function(t){try{t.__h.forEach(s),t.__h=t.__h.filter((function(u8){return!u8.__||v1(u8)}))}catch(u9){n.some((function(o){o.__h&&(o.__h=[])})),n=[],d.__e(u9,t.__v)}})),b&&b(_,n)},d.unmount=function(_){y&&y(_);var n,t=_.__c;t&&t.__H&&(t.__H.__.forEach((function(u10){try{s(u10)}catch(o){n=o}})),n&&d.__e(n,t.__v))};var g=typeof requestAnimationFrame=="function";function s(_){var n=e,t=_.__c;typeof t=="function"&&(_.__c=void 0,t()),e=n}function v1(_){var n=e;_.__c=_.__(),e=n}function m(_,n){return!_||_.length!==n.length||n.some((function(t,u11){return t!==_[u11]}))}function A(_,n){return typeof n=="function"?n(_):n}const osType=(()=>{const{Deno:Deno}=globalThis;if(typeof Deno?.build?.os==="string"){return Deno.build.os}const{navigator:navigator}=globalThis;if(navigator?.appVersion?.includes?.("Win")??false){return"windows"}return"linux"})();const isWindows=osType==="windows";const CHAR_FORWARD_SLASH=47;function assertPath(path2){if(typeof path2!=="string"){throw new TypeError(`Path must be a string. Received ${JSON.stringify(path2)}`)}}function isPosixPathSeparator(code){return code===47}function isPathSeparator(code){return isPosixPathSeparator(code)||code===92}function isWindowsDeviceRoot(code){return code>=97&&code<=122||code>=65&&code<=90}function normalizeString(path3,allowAboveRoot,separator,isPathSeparator1){let res="";let lastSegmentLength=0;let lastSlash=-1;let dots=0;let code;for(let i4=0,len=path3.length;i4<=len;++i4){if(i4<len)code=path3.charCodeAt(i4);else if(isPathSeparator1(code))break;else code=CHAR_FORWARD_SLASH;if(isPathSeparator1(code)){if(lastSlash===i4-1||dots===1){}else if(lastSlash!==i4-1&&dots===2){if(res.length<2||lastSegmentLength!==2||res.charCodeAt(res.length-1)!==46||res.charCodeAt(res.length-2)!==46){if(res.length>2){const lastSlashIndex=res.lastIndexOf(separator);if(lastSlashIndex===-1){res="";lastSegmentLength=0}else{res=res.slice(0,lastSlashIndex);lastSegmentLength=res.length-1-res.lastIndexOf(separator)}lastSlash=i4;dots=0;continue}else if(res.length===2||res.length===1){res="";lastSegmentLength=0;lastSlash=i4;dots=0;continue}}if(allowAboveRoot){if(res.length>0)res+=`${separator}..`;else res="..";lastSegmentLength=2}}else{if(res.length>0)res+=separator+path3.slice(lastSlash+1,i4);else res=path3.slice(lastSlash+1,i4);lastSegmentLength=i4-lastSlash-1}lastSlash=i4;dots=0}else if(code===46&&dots!==-1){++dots}else{dots=-1}}return res}function _format(sep3,pathObject){const dir=pathObject.dir||pathObject.root;const base=pathObject.base||(pathObject.name||"")+(pathObject.ext||"");if(!dir)return base;if(dir===pathObject.root)return dir+base;return dir+sep3+base}const WHITESPACE_ENCODINGS={"\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D"," ":"%20"};function encodeWhitespace(string){return string.replaceAll(/[\s]/g,(c4=>WHITESPACE_ENCODINGS[c4]??c4))}class DenoStdInternalError extends Error{constructor(message){super(message);this.name="DenoStdInternalError"}}function assert(expr,msg=""){if(!expr){throw new DenoStdInternalError(msg)}}const sep="\\";const delimiter=";";function resolve(...pathSegments){let resolvedDevice="";let resolvedTail="";let resolvedAbsolute=false;for(let i5=pathSegments.length-1;i5>=-1;i5--){let path4;const{Deno:Deno}=globalThis;if(i5>=0){path4=pathSegments[i5]}else if(!resolvedDevice){if(typeof Deno?.cwd!=="function"){throw new TypeError("Resolved a drive-letter-less path without a CWD.")}path4=Deno.cwd()}else{if(typeof Deno?.env?.get!=="function"||typeof Deno?.cwd!=="function"){throw new TypeError("Resolved a relative path without a CWD.")}path4=Deno.cwd();if(path4===undefined||path4.slice(0,3).toLowerCase()!==`${resolvedDevice.toLowerCase()}\\`){path4=`${resolvedDevice}\\`}}assertPath(path4);const len=path4.length;if(len===0)continue;let rootEnd=0;let device="";let isAbsolute1=false;const code=path4.charCodeAt(0);if(len>1){if(isPathSeparator(code)){isAbsolute1=true;if(isPathSeparator(path4.charCodeAt(1))){let j1=2;let last=j1;for(;j1<len;++j1){if(isPathSeparator(path4.charCodeAt(j1)))break}if(j1<len&&j1!==last){const firstPart=path4.slice(last,j1);last=j1;for(;j1<len;++j1){if(!isPathSeparator(path4.charCodeAt(j1)))break}if(j1<len&&j1!==last){last=j1;for(;j1<len;++j1){if(isPathSeparator(path4.charCodeAt(j1)))break}if(j1===len){device=`\\\\${firstPart}\\${path4.slice(last)}`;rootEnd=j1}else if(j1!==last){device=`\\\\${firstPart}\\${path4.slice(last,j1)}`;rootEnd=j1}}}}else{rootEnd=1}}else if(isWindowsDeviceRoot(code)){if(path4.charCodeAt(1)===58){device=path4.slice(0,2);rootEnd=2;if(len>2){if(isPathSeparator(path4.charCodeAt(2))){isAbsolute1=true;rootEnd=3}}}}}else if(isPathSeparator(code)){rootEnd=1;isAbsolute1=true}if(device.length>0&&resolvedDevice.length>0&&device.toLowerCase()!==resolvedDevice.toLowerCase()){continue}if(resolvedDevice.length===0&&device.length>0){resolvedDevice=device}if(!resolvedAbsolute){resolvedTail=`${path4.slice(rootEnd)}\\${resolvedTail}`;resolvedAbsolute=isAbsolute1}if(resolvedAbsolute&&resolvedDevice.length>0)break}resolvedTail=normalizeString(resolvedTail,!resolvedAbsolute,"\\",isPathSeparator);return resolvedDevice+(resolvedAbsolute?"\\":"")+resolvedTail||"."}function normalize(path5){assertPath(path5);const len=path5.length;if(len===0)return".";let rootEnd=0;let device;let isAbsolute2=false;const code=path5.charCodeAt(0);if(len>1){if(isPathSeparator(code)){isAbsolute2=true;if(isPathSeparator(path5.charCodeAt(1))){let j2=2;let last=j2;for(;j2<len;++j2){if(isPathSeparator(path5.charCodeAt(j2)))break}if(j2<len&&j2!==last){const firstPart=path5.slice(last,j2);last=j2;for(;j2<len;++j2){if(!isPathSeparator(path5.charCodeAt(j2)))break}if(j2<len&&j2!==last){last=j2;for(;j2<len;++j2){if(isPathSeparator(path5.charCodeAt(j2)))break}if(j2===len){return`\\\\${firstPart}\\${path5.slice(last)}\\`}else if(j2!==last){device=`\\\\${firstPart}\\${path5.slice(last,j2)}`;rootEnd=j2}}}}else{rootEnd=1}}else if(isWindowsDeviceRoot(code)){if(path5.charCodeAt(1)===58){device=path5.slice(0,2);rootEnd=2;if(len>2){if(isPathSeparator(path5.charCodeAt(2))){isAbsolute2=true;rootEnd=3}}}}}else if(isPathSeparator(code)){return"\\"}let tail;if(rootEnd<len){tail=normalizeString(path5.slice(rootEnd),!isAbsolute2,"\\",isPathSeparator)}else{tail=""}if(tail.length===0&&!isAbsolute2)tail=".";if(tail.length>0&&isPathSeparator(path5.charCodeAt(len-1))){tail+="\\"}if(device===undefined){if(isAbsolute2){if(tail.length>0)return`\\${tail}`;else return"\\"}else if(tail.length>0){return tail}else{return""}}else if(isAbsolute2){if(tail.length>0)return`${device}\\${tail}`;else return`${device}\\`}else if(tail.length>0){return device+tail}else{return device}}function isAbsolute(path6){assertPath(path6);const len=path6.length;if(len===0)return false;const code=path6.charCodeAt(0);if(isPathSeparator(code)){return true}else if(isWindowsDeviceRoot(code)){if(len>2&&path6.charCodeAt(1)===58){if(isPathSeparator(path6.charCodeAt(2)))return true}}return false}function join(...paths){const pathsCount=paths.length;if(pathsCount===0)return".";let joined;let firstPart=null;for(let i6=0;i6<pathsCount;++i6){const path7=paths[i6];assertPath(path7);if(path7.length>0){if(joined===undefined)joined=firstPart=path7;else joined+=`\\${path7}`}}if(joined===undefined)return".";let needsReplace=true;let slashCount=0;assert(firstPart!=null);if(isPathSeparator(firstPart.charCodeAt(0))){++slashCount;const firstLen=firstPart.length;if(firstLen>1){if(isPathSeparator(firstPart.charCodeAt(1))){++slashCount;if(firstLen>2){if(isPathSeparator(firstPart.charCodeAt(2)))++slashCount;else{needsReplace=false}}}}}if(needsReplace){for(;slashCount<joined.length;++slashCount){if(!isPathSeparator(joined.charCodeAt(slashCount)))break}if(slashCount>=2)joined=`\\${joined.slice(slashCount)}`}return normalize(joined)}function relative(from,to){assertPath(from);assertPath(to);if(from===to)return"";const fromOrig=resolve(from);const toOrig=resolve(to);if(fromOrig===toOrig)return"";from=fromOrig.toLowerCase();to=toOrig.toLowerCase();if(from===to)return"";let fromStart=0;let fromEnd=from.length;for(;fromStart<fromEnd;++fromStart){if(from.charCodeAt(fromStart)!==92)break}for(;fromEnd-1>fromStart;--fromEnd){if(from.charCodeAt(fromEnd-1)!==92)break}const fromLen=fromEnd-fromStart;let toStart=0;let toEnd=to.length;for(;toStart<toEnd;++toStart){if(to.charCodeAt(toStart)!==92)break}for(;toEnd-1>toStart;--toEnd){if(to.charCodeAt(toEnd-1)!==92)break}const toLen=toEnd-toStart;const length=fromLen<toLen?fromLen:toLen;let lastCommonSep=-1;let i7=0;for(;i7<=length;++i7){if(i7===length){if(toLen>length){if(to.charCodeAt(toStart+i7)===92){return toOrig.slice(toStart+i7+1)}else if(i7===2){return toOrig.slice(toStart+i7)}}if(fromLen>length){if(from.charCodeAt(fromStart+i7)===92){lastCommonSep=i7}else if(i7===2){lastCommonSep=3}}break}const fromCode=from.charCodeAt(fromStart+i7);const toCode=to.charCodeAt(toStart+i7);if(fromCode!==toCode)break;else if(fromCode===92)lastCommonSep=i7}if(i7!==length&&lastCommonSep===-1){return toOrig}let out="";if(lastCommonSep===-1)lastCommonSep=0;for(i7=fromStart+lastCommonSep+1;i7<=fromEnd;++i7){if(i7===fromEnd||from.charCodeAt(i7)===92){if(out.length===0)out+="..";else out+="\\.."}}if(out.length>0){return out+toOrig.slice(toStart+lastCommonSep,toEnd)}else{toStart+=lastCommonSep;if(toOrig.charCodeAt(toStart)===92)++toStart;return toOrig.slice(toStart,toEnd)}}function toNamespacedPath(path8){if(typeof path8!=="string")return path8;if(path8.length===0)return"";const resolvedPath=resolve(path8);if(resolvedPath.length>=3){if(resolvedPath.charCodeAt(0)===92){if(resolvedPath.charCodeAt(1)===92){const code=resolvedPath.charCodeAt(2);if(code!==63&&code!==46){return`\\\\?\\UNC\\${resolvedPath.slice(2)}`}}}else if(isWindowsDeviceRoot(resolvedPath.charCodeAt(0))){if(resolvedPath.charCodeAt(1)===58&&resolvedPath.charCodeAt(2)===92){return`\\\\?\\${resolvedPath}`}}}return path8}function dirname(path9){assertPath(path9);const len=path9.length;if(len===0)return".";let rootEnd=-1;let end=-1;let matchedSlash=true;let offset=0;const code=path9.charCodeAt(0);if(len>1){if(isPathSeparator(code)){rootEnd=offset=1;if(isPathSeparator(path9.charCodeAt(1))){let j3=2;let last=j3;for(;j3<len;++j3){if(isPathSeparator(path9.charCodeAt(j3)))break}if(j3<len&&j3!==last){last=j3;for(;j3<len;++j3){if(!isPathSeparator(path9.charCodeAt(j3)))break}if(j3<len&&j3!==last){last=j3;for(;j3<len;++j3){if(isPathSeparator(path9.charCodeAt(j3)))break}if(j3===len){return path9}if(j3!==last){rootEnd=offset=j3+1}}}}}else if(isWindowsDeviceRoot(code)){if(path9.charCodeAt(1)===58){rootEnd=offset=2;if(len>2){if(isPathSeparator(path9.charCodeAt(2)))rootEnd=offset=3}}}}else if(isPathSeparator(code)){return path9}for(let i8=len-1;i8>=offset;--i8){if(isPathSeparator(path9.charCodeAt(i8))){if(!matchedSlash){end=i8;break}}else{matchedSlash=false}}if(end===-1){if(rootEnd===-1)return".";else end=rootEnd}return path9.slice(0,end)}function basename(path10,ext=""){if(ext!==undefined&&typeof ext!=="string"){throw new TypeError('"ext" argument must be a string')}assertPath(path10);let start=0;let end=-1;let matchedSlash=true;let i9;if(path10.length>=2){const drive=path10.charCodeAt(0);if(isWindowsDeviceRoot(drive)){if(path10.charCodeAt(1)===58)start=2}}if(ext!==undefined&&ext.length>0&&ext.length<=path10.length){if(ext.length===path10.length&&ext===path10)return"";let extIdx=ext.length-1;let firstNonSlashEnd=-1;for(i9=path10.length-1;i9>=start;--i9){const code=path10.charCodeAt(i9);if(isPathSeparator(code)){if(!matchedSlash){start=i9+1;break}}else{if(firstNonSlashEnd===-1){matchedSlash=false;firstNonSlashEnd=i9+1}if(extIdx>=0){if(code===ext.charCodeAt(extIdx)){if(--extIdx===-1){end=i9}}else{extIdx=-1;end=firstNonSlashEnd}}}}if(start===end)end=firstNonSlashEnd;else if(end===-1)end=path10.length;return path10.slice(start,end)}else{for(i9=path10.length-1;i9>=start;--i9){if(isPathSeparator(path10.charCodeAt(i9))){if(!matchedSlash){start=i9+1;break}}else if(end===-1){matchedSlash=false;end=i9+1}}if(end===-1)return"";return path10.slice(start,end)}}function extname(path11){assertPath(path11);let start=0;let startDot=-1;let startPart=0;let end=-1;let matchedSlash=true;let preDotState=0;if(path11.length>=2&&path11.charCodeAt(1)===58&&isWindowsDeviceRoot(path11.charCodeAt(0))){start=startPart=2}for(let i10=path11.length-1;i10>=start;--i10){const code=path11.charCodeAt(i10);if(isPathSeparator(code)){if(!matchedSlash){startPart=i10+1;break}continue}if(end===-1){matchedSlash=false;end=i10+1}if(code===46){if(startDot===-1)startDot=i10;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){return""}return path11.slice(startDot,end)}function format(pathObject){if(pathObject===null||typeof pathObject!=="object"){throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof pathObject}`)}return _format("\\",pathObject)}function parse(path12){assertPath(path12);const ret={root:"",dir:"",base:"",ext:"",name:""};const len=path12.length;if(len===0)return ret;let rootEnd=0;let code=path12.charCodeAt(0);if(len>1){if(isPathSeparator(code)){rootEnd=1;if(isPathSeparator(path12.charCodeAt(1))){let j4=2;let last=j4;for(;j4<len;++j4){if(isPathSeparator(path12.charCodeAt(j4)))break}if(j4<len&&j4!==last){last=j4;for(;j4<len;++j4){if(!isPathSeparator(path12.charCodeAt(j4)))break}if(j4<len&&j4!==last){last=j4;for(;j4<len;++j4){if(isPathSeparator(path12.charCodeAt(j4)))break}if(j4===len){rootEnd=j4}else if(j4!==last){rootEnd=j4+1}}}}}else if(isWindowsDeviceRoot(code)){if(path12.charCodeAt(1)===58){rootEnd=2;if(len>2){if(isPathSeparator(path12.charCodeAt(2))){if(len===3){ret.root=ret.dir=path12;return ret}rootEnd=3}}else{ret.root=ret.dir=path12;return ret}}}}else if(isPathSeparator(code)){ret.root=ret.dir=path12;return ret}if(rootEnd>0)ret.root=path12.slice(0,rootEnd);let startDot=-1;let startPart=rootEnd;let end=-1;let matchedSlash=true;let i11=path12.length-1;let preDotState=0;for(;i11>=rootEnd;--i11){code=path12.charCodeAt(i11);if(isPathSeparator(code)){if(!matchedSlash){startPart=i11+1;break}continue}if(end===-1){matchedSlash=false;end=i11+1}if(code===46){if(startDot===-1)startDot=i11;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){if(end!==-1){ret.base=ret.name=path12.slice(startPart,end)}}else{ret.name=path12.slice(startPart,startDot);ret.base=path12.slice(startPart,end);ret.ext=path12.slice(startDot,end)}if(startPart>0&&startPart!==rootEnd){ret.dir=path12.slice(0,startPart-1)}else ret.dir=ret.root;return ret}function fromFileUrl(url){url=url instanceof URL?url:new URL(url);if(url.protocol!="file:"){throw new TypeError("Must be a file URL.")}let path13=decodeURIComponent(url.pathname.replace(/\//g,"\\").replace(/%(?![0-9A-Fa-f]{2})/g,"%25")).replace(/^\\*([A-Za-z]:)(\\|$)/,"$1\\");if(url.hostname!=""){path13=`\\\\${url.hostname}${path13}`}return path13}function toFileUrl(path14){if(!isAbsolute(path14)){throw new TypeError("Must be an absolute path.")}const[,hostname,pathname]=path14.match(/^(?:[/\\]{2}([^/\\]+)(?=[/\\](?:[^/\\]|$)))?(.*)/);const url=new URL("file:///");url.pathname=encodeWhitespace(pathname.replace(/%/g,"%25"));if(hostname!=null&&hostname!="localhost"){url.hostname=hostname;if(!url.hostname){throw new TypeError("Invalid hostname.")}}return url}const mod={sep:sep,delimiter:delimiter,resolve:resolve,normalize:normalize,isAbsolute:isAbsolute,join:join,relative:relative,toNamespacedPath:toNamespacedPath,dirname:dirname,basename:basename,extname:extname,format:format,parse:parse,fromFileUrl:fromFileUrl,toFileUrl:toFileUrl};const sep1="/";const delimiter1=":";function resolve1(...pathSegments){let resolvedPath="";let resolvedAbsolute=false;for(let i12=pathSegments.length-1;i12>=-1&&!resolvedAbsolute;i12--){let path15;if(i12>=0)path15=pathSegments[i12];else{const{Deno:Deno}=globalThis;if(typeof Deno?.cwd!=="function"){throw new TypeError("Resolved a relative path without a CWD.")}path15=Deno.cwd()}assertPath(path15);if(path15.length===0){continue}resolvedPath=`${path15}/${resolvedPath}`;resolvedAbsolute=path15.charCodeAt(0)===CHAR_FORWARD_SLASH}resolvedPath=normalizeString(resolvedPath,!resolvedAbsolute,"/",isPosixPathSeparator);if(resolvedAbsolute){if(resolvedPath.length>0)return`/${resolvedPath}`;else return"/"}else if(resolvedPath.length>0)return resolvedPath;else return"."}function normalize1(path16){assertPath(path16);if(path16.length===0)return".";const isAbsolute1=path16.charCodeAt(0)===47;const trailingSeparator=path16.charCodeAt(path16.length-1)===47;path16=normalizeString(path16,!isAbsolute1,"/",isPosixPathSeparator);if(path16.length===0&&!isAbsolute1)path16=".";if(path16.length>0&&trailingSeparator)path16+="/";if(isAbsolute1)return`/${path16}`;return path16}function isAbsolute1(path17){assertPath(path17);return path17.length>0&&path17.charCodeAt(0)===47}function join1(...paths){if(paths.length===0)return".";let joined;for(let i13=0,len=paths.length;i13<len;++i13){const path18=paths[i13];assertPath(path18);if(path18.length>0){if(!joined)joined=path18;else joined+=`/${path18}`}}if(!joined)return".";return normalize1(joined)}function relative1(from,to){assertPath(from);assertPath(to);if(from===to)return"";from=resolve1(from);to=resolve1(to);if(from===to)return"";let fromStart=1;const fromEnd=from.length;for(;fromStart<fromEnd;++fromStart){if(from.charCodeAt(fromStart)!==47)break}const fromLen=fromEnd-fromStart;let toStart=1;const toEnd=to.length;for(;toStart<toEnd;++toStart){if(to.charCodeAt(toStart)!==47)break}const toLen=toEnd-toStart;const length=fromLen<toLen?fromLen:toLen;let lastCommonSep=-1;let i14=0;for(;i14<=length;++i14){if(i14===length){if(toLen>length){if(to.charCodeAt(toStart+i14)===47){return to.slice(toStart+i14+1)}else if(i14===0){return to.slice(toStart+i14)}}else if(fromLen>length){if(from.charCodeAt(fromStart+i14)===47){lastCommonSep=i14}else if(i14===0){lastCommonSep=0}}break}const fromCode=from.charCodeAt(fromStart+i14);const toCode=to.charCodeAt(toStart+i14);if(fromCode!==toCode)break;else if(fromCode===47)lastCommonSep=i14}let out="";for(i14=fromStart+lastCommonSep+1;i14<=fromEnd;++i14){if(i14===fromEnd||from.charCodeAt(i14)===47){if(out.length===0)out+="..";else out+="/.."}}if(out.length>0)return out+to.slice(toStart+lastCommonSep);else{toStart+=lastCommonSep;if(to.charCodeAt(toStart)===47)++toStart;return to.slice(toStart)}}function toNamespacedPath1(path19){return path19}function dirname1(path20){assertPath(path20);if(path20.length===0)return".";const hasRoot=path20.charCodeAt(0)===47;let end=-1;let matchedSlash=true;for(let i15=path20.length-1;i15>=1;--i15){if(path20.charCodeAt(i15)===47){if(!matchedSlash){end=i15;break}}else{matchedSlash=false}}if(end===-1)return hasRoot?"/":".";if(hasRoot&&end===1)return"//";return path20.slice(0,end)}function basename1(path21,ext=""){if(ext!==undefined&&typeof ext!=="string"){throw new TypeError('"ext" argument must be a string')}assertPath(path21);let start=0;let end=-1;let matchedSlash=true;let i16;if(ext!==undefined&&ext.length>0&&ext.length<=path21.length){if(ext.length===path21.length&&ext===path21)return"";let extIdx=ext.length-1;let firstNonSlashEnd=-1;for(i16=path21.length-1;i16>=0;--i16){const code=path21.charCodeAt(i16);if(code===47){if(!matchedSlash){start=i16+1;break}}else{if(firstNonSlashEnd===-1){matchedSlash=false;firstNonSlashEnd=i16+1}if(extIdx>=0){if(code===ext.charCodeAt(extIdx)){if(--extIdx===-1){end=i16}}else{extIdx=-1;end=firstNonSlashEnd}}}}if(start===end)end=firstNonSlashEnd;else if(end===-1)end=path21.length;return path21.slice(start,end)}else{for(i16=path21.length-1;i16>=0;--i16){if(path21.charCodeAt(i16)===47){if(!matchedSlash){start=i16+1;break}}else if(end===-1){matchedSlash=false;end=i16+1}}if(end===-1)return"";return path21.slice(start,end)}}function extname1(path22){assertPath(path22);let startDot=-1;let startPart=0;let end=-1;let matchedSlash=true;let preDotState=0;for(let i17=path22.length-1;i17>=0;--i17){const code=path22.charCodeAt(i17);if(code===47){if(!matchedSlash){startPart=i17+1;break}continue}if(end===-1){matchedSlash=false;end=i17+1}if(code===46){if(startDot===-1)startDot=i17;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){return""}return path22.slice(startDot,end)}function format1(pathObject){if(pathObject===null||typeof pathObject!=="object"){throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof pathObject}`)}return _format("/",pathObject)}function parse1(path23){assertPath(path23);const ret={root:"",dir:"",base:"",ext:"",name:""};if(path23.length===0)return ret;const isAbsolute2=path23.charCodeAt(0)===47;let start;if(isAbsolute2){ret.root="/";start=1}else{start=0}let startDot=-1;let startPart=0;let end=-1;let matchedSlash=true;let i18=path23.length-1;let preDotState=0;for(;i18>=start;--i18){const code=path23.charCodeAt(i18);if(code===47){if(!matchedSlash){startPart=i18+1;break}continue}if(end===-1){matchedSlash=false;end=i18+1}if(code===46){if(startDot===-1)startDot=i18;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){if(end!==-1){if(startPart===0&&isAbsolute2){ret.base=ret.name=path23.slice(1,end)}else{ret.base=ret.name=path23.slice(startPart,end)}}}else{if(startPart===0&&isAbsolute2){ret.name=path23.slice(1,startDot);ret.base=path23.slice(1,end)}else{ret.name=path23.slice(startPart,startDot);ret.base=path23.slice(startPart,end)}ret.ext=path23.slice(startDot,end)}if(startPart>0)ret.dir=path23.slice(0,startPart-1);else if(isAbsolute2)ret.dir="/";return ret}function fromFileUrl1(url){url=url instanceof URL?url:new URL(url);if(url.protocol!="file:"){throw new TypeError("Must be a file URL.")}return decodeURIComponent(url.pathname.replace(/%(?![0-9A-Fa-f]{2})/g,"%25"))}function toFileUrl1(path24){if(!isAbsolute1(path24)){throw new TypeError("Must be an absolute path.")}const url=new URL("file:///");url.pathname=encodeWhitespace(path24.replace(/%/g,"%25").replace(/\\/g,"%5C"));return url}const mod1={sep:sep1,delimiter:delimiter1,resolve:resolve1,normalize:normalize1,isAbsolute:isAbsolute1,join:join1,relative:relative1,toNamespacedPath:toNamespacedPath1,dirname:dirname1,basename:basename1,extname:extname1,format:format1,parse:parse1,fromFileUrl:fromFileUrl1,toFileUrl:toFileUrl1};const path=isWindows?mod:mod1;const{join:join2,normalize:normalize2}=path;const path1=isWindows?mod:mod1;const{basename:basename2,delimiter:delimiter2,dirname:dirname2,extname:extname2,format:format2,fromFileUrl:fromFileUrl2,isAbsolute:isAbsolute2,join:join3,normalize:normalize3,parse:parse2,relative:relative2,resolve:resolve2,sep:sep2,toFileUrl:toFileUrl2,toNamespacedPath:toNamespacedPath2}=path1;class Time{hour;minute;constructor(hour,minute){this.hour=hour;this.minute=minute}toString(){return`${(this.hour+11)%12+1}:${this.minute.toString().padStart(2,"0")} ${this.hour<12?"a":"p"}m`}valueOf(){return this.hour*60+this.minute}}class Period{day;start;end;constructor(day,start,end){this.day=day;this.start=start;this.end=end}intersects(other){return this.day===other.day&&this.start<other.end&&other.start<this.end}displayTime(){return`${this.start}–${this.end}`}static#DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];dayName(){return Period.#DAY_NAMES[this.day]}toString(){return`${this.displayTime()} on ${this.dayName()}`}static#MINUTES_PER_DAY=24*60;valueOf(){return this.day*Period.#MINUTES_PER_DAY+this.start.valueOf()}}const importMeta={url:"file:///home/sheep/uxdy/webreg-scraping/scrape.ts",main:false};class Scraper{#term;#sessionIndex;#uqz;#cachePath;constructor(term1,{jlinksessionidx:jlinksessionidx,UqZBpD3n:UqZBpD3n,cachePath:cachePath=null}={}){this.#term=term1;this.#sessionIndex=jlinksessionidx;this.#uqz=UqZBpD3n;this.#cachePath=cachePath}async get(path25,query){const fileName=query.subjcode?.length>0?`${path25}_${query.subjcode.trim()}_${query.crsecode.trim()}`:path25;if(this.#cachePath!==null){const json=await Deno.readTextFile(join3(this.#cachePath,`${fileName}.json`)).then(JSON.parse).catch((error=>error instanceof Deno.errors.NotFound?null:Promise.reject(error)));if(json!==null){return json}}const json=await fetch(`https://act.ucsd.edu/webreg2/svc/wradapter/secure/${path25}?${new URLSearchParams(query)}`,{headers:{Cookie:`jlinksessionidx=${this.#sessionIndex}; UqZBpD3n=${this.#uqz}`}}).then((response=>response.ok?response.json():Promise.reject(`HTTP ${response.status} error from ${response.url}`)));if(this.#cachePath!==null){await Deno.writeTextFile(join3(this.#cachePath,`${fileName}.json`),JSON.stringify(json,null,"\t")+"\n")}return json}subjects(){return this.get("search-load-subject",{termcode:this.#term})}departments(){return this.get("search-load-department",{termcode:this.#term})}courses({subjcode:subjcode="",crsecode:crsecode="",department:department="",professor:professor="",title:title="",levels:levels="",days:days="",timestr:timestr="",opensection:opensection=false,isbasic:isbasic=true,basicsearchvalue:basicsearchvalue=""}={}){return this.get("search-by-all",{subjcode:subjcode,crsecode:crsecode,department:department,professor:professor,title:title,levels:levels,days:days,timestr:timestr,opensection:opensection.toString(),isbasic:isbasic.toString(),basicsearchvalue:basicsearchvalue,termcode:this.#term})}sections(subject,course){return this.get("search-load-group-data",{subjcode:subject.padEnd(4," "),crsecode:course.padEnd(5," "),termcode:this.#term})}async getCourse(subject,course,rawCourses){rawCourses??=await this.courses();const rawCourse1=rawCourses.find((rawCourse=>rawCourse.SUBJ_CODE.trim()===subject&&rawCourse.CRSE_CODE.trim()===course));if(!rawCourse1){throw new ReferenceError(`Could not find course ${subject} ${course}.`)}return new Course(rawCourse1,await this.sections(rawCourse1.SUBJ_CODE,rawCourse1.CRSE_CODE))}async*allCoursesWithProgress(){const courses=await this.courses();for(const[i19,course]of courses.entries()){const groups=await this.sections(course.SUBJ_CODE,course.CRSE_CODE);yield{course:new Course(course,groups),progress:(i19+1)/courses.length}}}async*allCourses(){for await(const{course:course}of this.allCoursesWithProgress()){yield course}}schedule(scheduleName="My Schedule",{final:__final="",sectnum:sectnum=""}={}){return this.get("get-class",{schedname:scheduleName,final:__final,sectnum:sectnum,termcode:this.#term})}getSchedule(name){return this.schedule(name).then((sections=>sections.map((section=>new ScheduleSection(section)))))}}class Instructor{firstName;surname;pid;constructor(name,pid){[this.surname,this.firstName]=name.split(", ").map((part=>part.trim()));this.pid=pid}get firstLast(){return`${this.firstName} ${this.surname}`}get lastFirst(){return`${this.surname}, ${this.firstName}`}}class BaseGroup{code;time;instructors;examType;instructionType;raw;constructor(rawGroup){const{SECT_CODE:SECT_CODE,BLDG_CODE:BLDG_CODE,ROOM_CODE:ROOM_CODE,PERSON_FULL_NAME:PERSON_FULL_NAME,FK_SPM_SPCL_MTG_CD:FK_SPM_SPCL_MTG_CD,FK_CDI_INSTR_TYPE:FK_CDI_INSTR_TYPE,BEGIN_HH_TIME:BEGIN_HH_TIME,BEGIN_MM_TIME:BEGIN_MM_TIME,END_HH_TIME:END_HH_TIME,END_MM_TIME:END_MM_TIME,DAY_CODE:DAY_CODE}=rawGroup;this.code=SECT_CODE;this.time=DAY_CODE===" "?null:{start:new Time(BEGIN_HH_TIME,BEGIN_MM_TIME),end:new Time(END_HH_TIME,END_MM_TIME),days:DAY_CODE.split("").map((day=>+day)),location:BLDG_CODE==="TBA"&&ROOM_CODE==="TBA"?null:{building:BLDG_CODE.trim(),room:ROOM_CODE.trim()}};this.instructors=PERSON_FULL_NAME==="Staff; "?[]:PERSON_FULL_NAME.split(":").map((instructor=>{const[name,pid]=instructor.split(";");return new Instructor(name,pid)}));this.examType=FK_SPM_SPCL_MTG_CD==="  "||FK_SPM_SPCL_MTG_CD==="TBA"?null:FK_SPM_SPCL_MTG_CD;this.instructionType=FK_CDI_INSTR_TYPE;this.raw=rawGroup}isExam(){return this.examType!==null}codeLetter(){return this.code.match(/^[A-Z]/)?.[0]??null}times(){const time=this.time;if(!time){return null}return time.days.map((day=>new Period(day,time.start,time.end)))}intersects(targetTimes){const meetingTimes=this.times();if(meetingTimes===null||targetTimes===null){return false}const times=(Array.isArray(targetTimes)?targetTimes:[targetTimes]).flatMap((meetingOrPeriod=>meetingOrPeriod instanceof Period?[meetingOrPeriod]:meetingOrPeriod.times()??[]));return meetingTimes.some((meetingTime=>times.some((time=>meetingTime.intersects(time)))))}get type(){return this.examType||this.instructionType}}class Group extends BaseGroup{capacity;enrolled;waitlist;stopEnrolment;cancelled;plannable;enrollable;constructor(rawGroup){super(rawGroup);const{SCTN_CPCTY_QTY:SCTN_CPCTY_QTY,SCTN_ENRLT_QTY:SCTN_ENRLT_QTY,COUNT_ON_WAITLIST:COUNT_ON_WAITLIST,STP_ENRLT_FLAG:STP_ENRLT_FLAG,FK_SST_SCTN_STATCD:FK_SST_SCTN_STATCD}=rawGroup;this.capacity=SCTN_CPCTY_QTY===9999?Infinity:SCTN_CPCTY_QTY;this.enrolled=SCTN_ENRLT_QTY;this.waitlist=COUNT_ON_WAITLIST;this.stopEnrolment=STP_ENRLT_FLAG==="Y";this.cancelled=FK_SST_SCTN_STATCD==="CA";this.plannable=FK_SST_SCTN_STATCD==="AC"&&!this.isExam();this.enrollable=this.plannable&&this.enrolled<this.capacity&&!this.stopEnrolment}}class Course{subject;course;title;unit;groups;raw;constructor(rawCourse,rawGroups){this.subject=rawCourse.SUBJ_CODE.trim();this.course=rawCourse.CRSE_CODE.trim();this.title=rawCourse.CRSE_TITLE.trim();this.unit={from:rawCourse.UNIT_FROM,to:rawCourse.UNIT_TO,step:rawCourse.UNIT_INC};this.groups=rawGroups.map((group=>new Group(group)));this.raw=rawCourse}get code(){return`${this.subject} ${this.course}`}letters(){const letterGroups={};for(const meeting of this.groups){if(meeting.isExam()){continue}const letter=meeting.codeLetter()??meeting.code;letterGroups[letter]??={plannables:[],otherMeetings:[],exams:{}};if(meeting.examType!==null){letterGroups[letter].exams[meeting.examType]=meeting}else if(meeting.plannable){letterGroups[letter].plannables.push(meeting)}else{letterGroups[letter].otherMeetings.push(meeting)}}return Object.values(letterGroups)}}const gradeScaleKey={L:"L",P:"P/NP","P/NP":"P/NP",S:"S/U","S/U":"S/U",H:"H"," ":null};class ScheduleSection extends BaseGroup{course;state;constructor(rawClass){super(rawClass);const{SUBJ_CODE:SUBJ_CODE,CRSE_CODE:CRSE_CODE,CRSE_TITLE:CRSE_TITLE,SECT_CREDIT_HRS:SECT_CREDIT_HRS,SECT_CREDIT_HRS_PL:SECT_CREDIT_HRS_PL,GRADE_OPTION:GRADE_OPTION,GRADE_OPTN_CD_PLUS:GRADE_OPTN_CD_PLUS,ENROLL_STATUS:ENROLL_STATUS,WT_POS:WT_POS}=rawClass;this.course={subject:SUBJ_CODE.trim(),course:CRSE_CODE.trim(),title:CRSE_TITLE.trim(),unit:SECT_CREDIT_HRS,canChangeUnit:SECT_CREDIT_HRS_PL==="+",gradeScale:gradeScaleKey[GRADE_OPTION],canChangeGradeScale:GRADE_OPTN_CD_PLUS==="+"};this.state=ENROLL_STATUS==="WT"?{type:"waitlisted",position:+WT_POS}:{type:ENROLL_STATUS==="EN"?"enrolled":"planned"}}}if(importMeta.main){const getter=new Scraper("WI22",{jlinksessionidx:Deno.args[1],UqZBpD3n:Deno.args[0],cachePath:"cache-wi22"});const courses=[];const freq={};let count=0;for await(const course of getter.allCourses()){courses.push(course);for(const group of course.groups){freq[group.raw.DAY_CODE.length]??=0;freq[group.raw.DAY_CODE.length]++;if(group.raw.DAY_CODE.length>=4){console.log(`${course.code} ${group.code} ${group.raw.DAY_CODE}`)}if(!group.isExam()&&group.time?.location?.building!=="RCLAS"){count++}}}console.log(freq,count)}const params=new URL(window.location.href).searchParams;const term=params.get("p1");if(!term){alert("I can't know what quarter you're on based on the URL. Have you selected a quarter yet?");throw new Error("Unable to get term from URL.")}const getter=new Scraper(term);function useAsyncEffect(callback){T1((()=>{callback()}),[])}function Checkbox({checked:checked,onCheck:onCheck,disabled:disabled,children:children}){return v("p",{children:v("label",{children:[v("input",{type:"checkbox",checked:checked,onChange:onCheck&&(e25=>onCheck(e25.currentTarget.checked)),disabled:disabled})," ",children]})})}const dayNames=["Sundays","Mondays","Tuesdays","Wednesdays","Thursdays","Fridays","Saturdays"];function CourseEntry({course:course,sections:sections}){const[open1,setOpen]=F1(false);return v("div",{class:"st-course-wrapper",children:[v("button",{class:`st-course ${open1?"st-open":""}`,onClick:()=>setOpen((open=>!open)),children:[v("div",{class:"st-course-code",children:[course.subject," ",course.course]}),v("div",{class:"st-course-title",children:course.title})]}),open1&&v("div",{class:"st-sections",children:sections.map((section=>v("div",{class:`st-section ${section.waitlist>0?"st-has-waitlist":""}`,children:[v("div",{class:"st-section-code",children:[section.code,v("div",{class:"st-enrolled",children:section.enrolled<section.capacity?v(U,{children:[v("strong",{children:section.enrolled}),section.capacity===Infinity?"":`/${section.capacity}`," ","enrolled"]}):v(U,{children:[v("strong",{children:section.waitlist})," waitlisted"]})})]}),v("div",{className:"st-info",children:[section.time?v("div",{class:"st-time",children:[v("div",{children:[section.time.start.toString(),"–",section.time.end.toString()]}),v("div",{children:["on"," ",section.time.days.map((day=>dayNames[day])).join(", ")]})]}):null,v("div",{className:"st-professor",children:section.instructors.length>0?section.instructors.map((({firstName:firstName,surname:surname})=>v(U,{children:[v("div",{children:firstName}),v("div",{children:v("strong",{children:surname})})]}))):"Staff"})]})]},section.code)))})]})}function CourseList({lowerDivOnly:lowerDivOnly,checkSchedule:checkSchedule,joinableOnly:joinableOnly,tenPercentRule:tenPercentRule}){const[courses1,setCourses]=F1([]);const[loading,setLoading]=F1(false);useAsyncEffect((async()=>{setLoading(true);const courses=[];for await(const course of getter.allCourses()){courses.push(course);setCourses([...courses])}setLoading(false)}));return v("div",{children:[courses1.map((course=>{if(lowerDivOnly){const courseNumber=course.course.match(/\d+/)?.[0];if(courseNumber&&+courseNumber>=100){return null}}const approvedLetters=["0"];if(checkSchedule){const otherSections=course.groups.filter((group=>!group.isExam()&&!group.plannable));const sectionsByLetters={};for(const section1 of otherSections){if(/^[A-Z]$/.test(section1.code[0])){sectionsByLetters[section1.code[0]]??=[];sectionsByLetters[section1.code[0]].push(section1)}else if(section1.code[0]!=="0"){console.log(section1.code,course,section1)}}for(const[letter,sections]of Object.entries(sectionsByLetters)){if(sections.every((section=>!section.times()?.some((time=>checkSchedule.some((period=>time.intersects(period)))))))){approvedLetters.push(letter)}}}const sections=course.groups.filter((group=>{if(!group.plannable)return false;if(joinableOnly&&!group.enrollable&&!(tenPercentRule&&group.waitlist+1<=group.capacity*.1)){return false}if(checkSchedule){if(!approvedLetters.includes(group.code[0])){return false}const times=group.times();if(!times||checkSchedule.some((period=>times.some((time=>time.intersects(period)))))){return false}}return true}));return sections.length>0?v(CourseEntry,{course:course,sections:sections},course.subject+course.course):null})),loading?v("p",{children:"Loading..."}):null]})}function App(){const[upperDiv,setUpperDiv]=F1(false);const[conflicts,setConflicts]=F1(false);const[full,setFull]=F1(false);const[tenPercent,setTenPercent]=F1(false);const[schedule,setSchedule]=F1();useAsyncEffect((async()=>{const sections=await getter.getSchedule();setSchedule(sections.filter((section=>section.state.type!=="planned")).flatMap((section=>section.times()??[])))}));T1((()=>{const link=document.createElement("link");link.rel="stylesheet";link.href=typeof Deno==="undefined"?"https://sheeptester.github.io/uxdy/bookmarklet/styles.css":"http://localhost:8080/webreg-scraping/bookmarklet/styles.css";document.head.append(link);return()=>{link.remove()}}),[]);return v("div",{children:[v("fieldset",{children:[v("legend",{children:"Filters"}),v(Checkbox,{checked:upperDiv,onCheck:setUpperDiv,children:"Include upper division courses"}),v(Checkbox,{checked:conflicts,onCheck:setConflicts,children:"Include conflicts with current schedule"}),v(Checkbox,{checked:full,onCheck:setFull,disabled:tenPercent,children:"Include full sections"}),v(Checkbox,{checked:tenPercent,onCheck:setTenPercent,children:"Only include full sections following the 10% waitlist rule"})]}),schedule&&v(CourseList,{lowerDivOnly:!upperDiv,checkSchedule:conflicts?null:schedule,joinableOnly:tenPercent||!full,tenPercentRule:tenPercent})]})}const root=document.createElement("div");document.getElementById("msg-status")?.after(root);re(v(App,{}),root);
