var w,d,j,b,R,z,F,N={},q=[],re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function k(e,t){for(var _ in t)e[_]=t[_];return e}function J(e){var t=e.parentNode;t&&t.removeChild(e)}function oe(e,t,_){var o,l,r,s={};for(r in t)r=="key"?o=t[r]:r=="ref"?l=t[r]:s[r]=t[r];if(arguments.length>2&&(s.children=arguments.length>3?w.call(arguments,2):_),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)s[r]===void 0&&(s[r]=e.defaultProps[r]);return P(e,s,o,l,null)}function P(e,t,_,o,l){var r={type:e,props:t,key:_,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l??++j};return l==null&&d.vnode!=null&&d.vnode(r),r}function W(e){return e.children}function T(e,t){this.props=e,this.context=t}function S(e,t){if(t==null)return e.__?S(e.__,e.__.__k.indexOf(e)+1):null;for(var _;t<e.__k.length;t++)if((_=e.__k[t])!=null&&_.__e!=null)return _.__e;return typeof e.type=="function"?S(e):null}function K(e){var t,_;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((_=e.__k[t])!=null&&_.__e!=null){e.__e=e.__c.base=_.__e;break}return K(e)}}function H(e){(!e.__d&&(e.__d=!0)&&b.push(e)&&!L.__r++||R!==d.debounceRendering)&&((R=d.debounceRendering)||z)(L)}function L(){var e,t,_,o,l,r,s,f;for(b.sort(F);e=b.shift();)e.__d&&(t=b.length,o=void 0,l=void 0,s=(r=(_=e).__v).__e,(f=_.__P)&&(o=[],(l=k({},r)).__v=r.__v+1,I(f,r,l,_.__n,f.ownerSVGElement!==void 0,r.__h!=null?[s]:null,o,s??S(r),r.__h),ee(o,r),r.__e!=s&&K(r)),b.length>t&&b.sort(F));L.__r=0}function Q(e,t,_,o,l,r,s,f,p,a){var n,h,u,i,c,x,v,y=o&&o.__k||q,g=y.length;for(_.__k=[],n=0;n<t.length;n++)if((i=_.__k[n]=(i=t[n])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"?P(null,i,null,null,i):Array.isArray(i)?P(W,{children:i},null,null,null):i.__b>0?P(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null){if(i.__=_,i.__b=_.__b+1,(u=y[n])===null||u&&i.key==u.key&&i.type===u.type)y[n]=void 0;else for(h=0;h<g;h++){if((u=y[h])&&i.key==u.key&&i.type===u.type){y[h]=void 0;break}u=null}I(e,i,u=u||N,l,r,s,f,p,a),c=i.__e,(h=i.ref)&&u.ref!=h&&(v||(v=[]),u.ref&&v.push(u.ref,null,i),v.push(h,i.__c||c,i)),c!=null?(x==null&&(x=c),typeof i.type=="function"&&i.__k===u.__k?i.__d=p=X(i,p,e):p=Y(e,i,u,y,c,p),typeof _.type=="function"&&(_.__d=p)):p&&u.__e==p&&p.parentNode!=e&&(p=S(u))}for(_.__e=x,n=g;n--;)y[n]!=null&&(typeof _.type=="function"&&y[n].__e!=null&&y[n].__e==_.__d&&(_.__d=Z(o).nextSibling),_e(y[n],y[n]));if(v)for(n=0;n<v.length;n++)te(v[n],v[++n],v[++n])}function X(e,t,_){for(var o,l=e.__k,r=0;l&&r<l.length;r++)(o=l[r])&&(o.__=e,t=typeof o.type=="function"?X(o,t,_):Y(_,o,o,l,o.__e,t));return t}function Y(e,t,_,o,l,r){var s,f,p;if(t.__d!==void 0)s=t.__d,t.__d=void 0;else if(_==null||l!=r||l.parentNode==null)e:if(r==null||r.parentNode!==e)e.appendChild(l),s=null;else{for(f=r,p=0;(f=f.nextSibling)&&p<o.length;p+=1)if(f==l)break e;e.insertBefore(l,r),s=r}return s!==void 0?s:l.nextSibling}function Z(e){var t,_,o;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((_=e.__k[t])&&(o=Z(_)))return o}return null}function ie(e,t,_,o,l){var r;for(r in _)r==="children"||r==="key"||r in t||M(e,r,null,_[r],o);for(r in t)l&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||_[r]===t[r]||M(e,r,t[r],_[r],o)}function $(e,t,_){t[0]==="-"?e.setProperty(t,_??""):e[t]=_==null?"":typeof _!="number"||re.test(t)?_:_+"px"}function M(e,t,_,o,l){var r;e:if(t==="style")if(typeof _=="string")e.style.cssText=_;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)_&&t in _||$(e.style,t,"");if(_)for(t in _)o&&_[t]===o[t]||$(e.style,t,_[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=_,_?o||e.addEventListener(t,r?V:B,r):e.removeEventListener(t,r?V:B,r);else if(t!=="dangerouslySetInnerHTML"){if(l)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=_??"";break e}catch{}typeof _=="function"||(_==null||_===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,_))}}function B(e){return this.l[e.type+!1](d.event?d.event(e):e)}function V(e){return this.l[e.type+!0](d.event?d.event(e):e)}function I(e,t,_,o,l,r,s,f,p){var a,n,h,u,i,c,x,v,y,g,E,C,O,A,U,m=t.type;if(t.constructor!==void 0)return null;_.__h!=null&&(p=_.__h,f=t.__e=_.__e,t.__h=null,r=[f]),(a=d.__b)&&a(t);try{e:if(typeof m=="function"){if(v=t.props,y=(a=m.contextType)&&o[a.__c],g=a?y?y.props.value:a.__:o,_.__c?x=(n=t.__c=_.__c).__=n.__E:("prototype"in m&&m.prototype.render?t.__c=n=new m(v,g):(t.__c=n=new T(v,g),n.constructor=m,n.render=ue),y&&y.sub(n),n.props=v,n.state||(n.state={}),n.context=g,n.__n=o,h=n.__d=!0,n.__h=[],n._sb=[]),n.__s==null&&(n.__s=n.state),m.getDerivedStateFromProps!=null&&(n.__s==n.state&&(n.__s=k({},n.__s)),k(n.__s,m.getDerivedStateFromProps(v,n.__s))),u=n.props,i=n.state,n.__v=t,h)m.getDerivedStateFromProps==null&&n.componentWillMount!=null&&n.componentWillMount(),n.componentDidMount!=null&&n.__h.push(n.componentDidMount);else{if(m.getDerivedStateFromProps==null&&v!==u&&n.componentWillReceiveProps!=null&&n.componentWillReceiveProps(v,g),!n.__e&&n.shouldComponentUpdate!=null&&n.shouldComponentUpdate(v,n.__s,g)===!1||t.__v===_.__v){for(t.__v!==_.__v&&(n.props=v,n.state=n.__s,n.__d=!1),n.__e=!1,t.__e=_.__e,t.__k=_.__k,t.__k.forEach((function(D){D&&(D.__=t)})),E=0;E<n._sb.length;E++)n.__h.push(n._sb[E]);n._sb=[],n.__h.length&&s.push(n);break e}n.componentWillUpdate!=null&&n.componentWillUpdate(v,n.__s,g),n.componentDidUpdate!=null&&n.__h.push((function(){n.componentDidUpdate(u,i,c)}))}if(n.context=g,n.props=v,n.__P=e,C=d.__r,O=0,"prototype"in m&&m.prototype.render){for(n.state=n.__s,n.__d=!1,C&&C(t),a=n.render(n.props,n.state,n.context),A=0;A<n._sb.length;A++)n.__h.push(n._sb[A]);n._sb=[]}else do{n.__d=!1,C&&C(t),a=n.render(n.props,n.state,n.context),n.state=n.__s}while(n.__d&&++O<25);n.state=n.__s,n.getChildContext!=null&&(o=k(k({},o),n.getChildContext())),h||n.getSnapshotBeforeUpdate==null||(c=n.getSnapshotBeforeUpdate(u,i)),U=a!=null&&a.type===W&&a.key==null?a.props.children:a,Q(e,Array.isArray(U)?U:[U],t,_,o,l,r,s,f,p),n.base=t.__e,t.__h=null,n.__h.length&&s.push(n),x&&(n.__E=n.__=null),n.__e=!1}else r==null&&t.__v===_.__v?(t.__k=_.__k,t.__e=_.__e):t.__e=se(_.__e,t,_,o,l,r,s,p);(a=d.diffed)&&a(t)}catch(D){t.__v=null,(p||r!=null)&&(t.__e=f,t.__h=!!p,r[r.indexOf(f)]=null),d.__e(D,t,_)}}function ee(e,t){d.__c&&d.__c(t,e),e.some((function(_){try{e=_.__h,_.__h=[],e.some((function(o){o.call(_)}))}catch(o){d.__e(o,_.__v)}}))}function se(e,t,_,o,l,r,s,f){var p,a,n,h=_.props,u=t.props,i=t.type,c=0;if(i==="svg"&&(l=!0),r!=null){for(;c<r.length;c++)if((p=r[c])&&"setAttribute"in p==!!i&&(i?p.localName===i:p.nodeType===3)){e=p,r[c]=null;break}}if(e==null){if(i===null)return document.createTextNode(u);e=l?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i,u.is&&u),r=null,f=!1}if(i===null)h===u||f&&e.data===u||(e.data=u);else{if(r=r&&w.call(e.childNodes),a=(h=_.props||N).dangerouslySetInnerHTML,n=u.dangerouslySetInnerHTML,!f){if(r!=null)for(h={},c=0;c<e.attributes.length;c++)h[e.attributes[c].name]=e.attributes[c].value;(n||a)&&(n&&(a&&n.__html==a.__html||n.__html===e.innerHTML)||(e.innerHTML=n&&n.__html||""))}if(ie(e,u,h,l,f),n)t.__k=[];else if(c=t.props.children,Q(e,Array.isArray(c)?c:[c],t,_,o,l&&i!=="foreignObject",r,s,r?r[0]:_.__k&&S(_,0),f),r!=null)for(c=r.length;c--;)r[c]!=null&&J(r[c]);f||("value"in u&&(c=u.value)!==void 0&&(c!==e.value||i==="progress"&&!c||i==="option"&&c!==h.value)&&M(e,"value",c,h.value,!1),"checked"in u&&(c=u.checked)!==void 0&&c!==e.checked&&M(e,"checked",c,h.checked,!1))}return e}function te(e,t,_){try{typeof e=="function"?e(t):e.current=t}catch(o){d.__e(o,_)}}function _e(e,t,_){var o,l;if(d.unmount&&d.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||te(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){d.__e(r,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(l=0;l<o.length;l++)o[l]&&_e(o[l],t,_||typeof e.type!="function");_||e.__e==null||J(e.__e),e.__=e.__e=e.__d=void 0}function ue(e,t,_){return this.constructor(e,_)}function ce(e,t,_){var o,l,r;d.__&&d.__(e,t),l=(o=typeof _=="function")?null:_&&_.__k||t.__k,r=[],I(t,e=(!o&&_||t).__k=oe(W,null,[e]),l||N,N,t.ownerSVGElement!==void 0,!o&&_?[_]:l?null:t.firstChild?w.call(t.childNodes):null,r,!o&&_?_:l?l.__e:t.firstChild,o),ee(r,e)}w=q.slice,d={__e:function(e,t,_,o){for(var l,r,s;t=t.__;)if((l=t.__c)&&!l.__)try{if((r=l.constructor)&&r.getDerivedStateFromError!=null&&(l.setState(r.getDerivedStateFromError(e)),s=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,o||{}),s=l.__d),s)return l.__E=l}catch(f){e=f}throw e}},j=0,T.prototype.setState=function(e,t){var _;_=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=k({},this.state),typeof e=="function"&&(e=e(k({},_),this.props)),e&&k(_,e),e!=null&&this.__v&&(t&&this._sb.push(t),H(this))},T.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),H(this))},T.prototype.render=W,b=[],z=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,F=function(e,t){return e.__v.__b-t.__v.__b},L.__r=0,0;var i=0;function v(n,s,f,a,l,u){var r,o,_={};for(o in s)o=="ref"?r=s[o]:_[o]=s[o];var t={type:n,props:_,key:f,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--i,__source:l,__self:u};if(typeof n=="function"&&(r=n.defaultProps))for(o in r)_[o]===void 0&&(_[o]=r[o]);return d.vnode&&d.vnode(t),t}var s,o,H1,b1,v1=0,x=[],p=[],g=d.__b,A=d.__r,C=d.diffed,F1=d.__c,q1=d.unmount;function l(_,n){d.__h&&d.__h(o,_,v1||n),v1=0;var u=o.__H||(o.__H={__:[],__h:[]});return _>=u.__.length&&u.__.push({__V:p}),u.__[_]}function k1(_){return v1=1,B1(U,_)}function B1(_,n,u){var t=l(s++,2);if(t.t=_,!t.__c&&(t.__=[u?u(n):U(void 0,n),function(c){var a=t.__N?t.__N[0]:t.__[0],f=t.t(a,c);a!==f&&(t.__N=[f,t.__[1]],t.__c.setState({}))}],t.__c=o,!o.u)){var i=function(c,a,f){if(!t.__c.__H)return!0;var m=t.__c.__H.__.filter((function(e){return e.__c}));if(m.every((function(e){return!e.__N})))return!h||h.call(this,c,a,f);var V=!1;return m.forEach((function(e){if(e.__N){var P=e.__[0];e.__=e.__N,e.__N=void 0,P!==e.__[0]&&(V=!0)}})),!(!V&&t.__c.props===c)&&(!h||h.call(this,c,a,f))};o.u=!0;var h=o.shouldComponentUpdate,N=o.componentWillUpdate;o.componentWillUpdate=function(c,a,f){if(this.__e){var m=h;h=void 0,i(c,a,f),h=m}N&&N.call(this,c,a,f)},o.shouldComponentUpdate=i}return t.__N||t.__}function j1(_,n){var u=l(s++,3);!d.__s&&y(u.__H,n)&&(u.__=_,u.i=n,o.__H.__h.push(u))}function w1(_){return v1=5,T1((function(){return{current:_}}),[])}function T1(_,n){var u=l(s++,7);return y(u.__H,n)?(u.__V=_(),u.i=n,u.__h=_,u.__V):u.__}function L1(_,n){return v1=8,T1((function(){return _}),n)}function R1(){for(var _;_=x.shift();)if(_.__P&&_.__H)try{_.__H.__h.forEach(d1),_.__H.__h.forEach(E),_.__H.__h=[]}catch(n){_.__H.__h=[],d.__e(n,_.__v)}}d.__b=function(_){o=null,g&&g(_)},d.__r=function(_){A&&A(_),s=0;var n=(o=_.__c).__H;n&&(H1===o?(n.__h=[],o.__h=[],n.__.forEach((function(u){u.__N&&(u.__=u.__N),u.__V=p,u.__N=u.i=void 0}))):(n.__h.forEach(d1),n.__h.forEach(E),n.__h=[])),H1=o},d.diffed=function(_){C&&C(_);var n=_.__c;n&&n.__H&&(n.__H.__h.length&&(x.push(n)!==1&&b1===d.requestAnimationFrame||((b1=d.requestAnimationFrame)||S1)(R1)),n.__H.__.forEach((function(u){u.i&&(u.__H=u.i),u.__V!==p&&(u.__=u.__V),u.i=void 0,u.__V=p}))),H1=o=null},d.__c=function(_,n){n.some((function(u){try{u.__h.forEach(d1),u.__h=u.__h.filter((function(t){return!t.__||E(t)}))}catch(t){n.some((function(i){i.__h&&(i.__h=[])})),n=[],d.__e(t,u.__v)}})),F1&&F1(_,n)},d.unmount=function(_){q1&&q1(_);var n,u=_.__c;u&&u.__H&&(u.__H.__.forEach((function(t){try{d1(t)}catch(i){n=i}})),u.__H=void 0,n&&d.__e(n,u.__v))};var D=typeof requestAnimationFrame=="function";function S1(_){var n,u=function(){clearTimeout(t),D&&cancelAnimationFrame(n),setTimeout(_)},t=setTimeout(u,100);D&&(n=requestAnimationFrame(u))}function d1(_){var n=o,u=_.__c;typeof u=="function"&&(_.__c=void 0,u()),o=n}function E(_){var n=o;_.__c=_.__(),o=n}function y(_,n){return!_||_.length!==n.length||n.some((function(u,t){return u!==_[t]}))}function U(_,n){return typeof n=="function"?n(_):n}const MS_PER_DAY=24*60*60*1e3;const DAY_NUMS=[0,1,2,3,4,5,6];class Day{#date;constructor(utcDate){this.#date=utcDate}get year(){return this.#date.getUTCFullYear()}get month(){return this.#date.getUTCMonth()+1}monthName(length="long",locales){return new Intl.DateTimeFormat(locales,{timeZone:"UTC",month:length}).format(this.#date)}get date(){return this.#date.getUTCDate()}get day(){return this.#date.getUTCDay()}dayName(length="long",locales){return new Intl.DateTimeFormat(locales,{timeZone:"UTC",weekday:length}).format(this.#date)}get id(){return this.#date.getTime()/MS_PER_DAY}get sunday(){return this.last(0)}get monday(){return this.last(1)}get valid(){return!Number.isNaN(this.#date.getTime())}add(days){const clone=new Date(this.#date);clone.setUTCDate(this.date+days);return new Day(clone)}last(day){const offset=day-this.day;if(offset===0){return this}else if(offset<0){return this.add(offset)}else{return this.add(offset-7)}}toLocal(){return new Date(this.year,this.month-1,this.date)}toString(){return this.valid?[this.year.toString().padStart(4,"0"),this.month.toString().padStart(2,"0"),this.date.toString().padStart(2,"0")].join("-"):"Invalid date"}valueOf(){return this.id}toJSON(){return this.toString()}[Symbol.for("Deno.customInspect")](){return this.toString()}static get EPOCH(){return new Day(new Date(0))}static from(year,month,date){const dateObj=new Date(Date.UTC(year,month-1,date));if(year<100){dateObj.setUTCFullYear(year)}return new Day(dateObj)}static fromLocal(date){return Day.from(date.getFullYear(),date.getMonth()+1,date.getDate())}static today(){return Day.fromLocal(new Date)}static parse(str){const[year,month,date]=str.split("-").map(Number);const parsed=Day.from(year,month,date);return parsed.valid?parsed:null}static fromId(dayId){return Day.EPOCH.add(dayId)}static monthName(month,length="long",locales){return this.from(1970,month,1).monthName(length,locales)}static dayName(day,length="long",locales){return this.from(1970,1,4+day).dayName(length,locales)}static min(first,...rest){const days=Array.isArray(first)?[...first,...rest]:[first,...rest];return this.fromId(days.reduce(((cum,curr)=>Math.min(cum,curr.id)),Infinity))}static max(first,...rest){const days=Array.isArray(first)?[...first,...rest]:[first,...rest];return this.fromId(days.reduce(((cum,curr)=>Math.max(cum,curr.id)),-Infinity))}}const holidayCache={};function getHolidays(year){holidayCache[year]??={[Day.from(year,1,1).id]:"New Year's Day",[Day.from(year,1,7).monday.add(14).id]:"Martin Luther King Jr. Day",[Day.from(year,2,7).monday.add(14).id]:"Presidents' Day",[Day.from(year,3,31).last(5).id]:"César Chávez Day",[Day.from(year,5,31).monday.id]:"Memorial Day",[Day.from(year,6,19).id]:"Juneteenth",[Day.from(year,7,4).id]:"Independence Day",[Day.from(year,9,7).monday.id]:"Labor Day",[Day.from(year,9,11).id]:"Veterans Day",[Day.from(year,11,7).last(4).add(21).id]:"Thanksgiving",[Day.from(year,11,7).last(4).add(22).id]:"Day after Thanksgiving",[Day.from(year,12,24).id]:"Christmas Eve",[Day.from(year,12,25).id]:"Christmas",[Day.from(year,12,31).id]:"New Year's Eve"};return holidayCache[year]}const importMeta={url:"file:///home/sheep/uxdy/terms/index.ts",main:false};const offsets={WI:0,SP:84,S1:175,S2:210,FA:262};const lengths={FA:79,WI:75,SP:74,S1:33,S2:33};const finalsOffsets={FA:7,WI:7,SP:6,S1:1,S2:1};const names={FA:"Fall",WI:"Winter",SP:"Spring",S1:"Summer Session I",S2:"Summer Session II",S3:"Special Summer Session",SU:"Summer Med School"};function winterStart(year){if(year<2028){const jan1=Day.from(year,1,1);return Day.from(year,1,9-jan1.day)}else{const dec30=Day.from(year,1,-1);return Day.from(year,1,14-dec30.day)}}function getTermDays(year,season){let offset=offsets[season];if((season==="FA"?year+1:year)===2e3){offset+=7}if(season==="FA"&&[1995,2001,2006,2014,2020].includes(year)){if(year<2010){offset-=7}else{offset+=7}}const start=winterStart(year).add(offset);return{start:start,finals:start.add(lengths[season]-finalsOffsets[season]),end:start.add(lengths[season]+(year<=1995&&season==="SP"?1:year<2e3&&(season==="S1"||season==="S2")?-1:0))}}function getTerm(day){let termDays=null;let season=null;let current=false;for(const term of["WI","SP","S1","S2","FA"]){termDays=getTermDays(day.year,term);if(day<=termDays.end){season=term;current=day>=termDays.start;break}}if(termDays===null){throw new Error("Unreachable.")}const year=season===null?day.year+1:day.year;if(season===null){season="WI";termDays=getTermDays(year,season)}if(current){const finals=current&&day>=termDays.finals;const week=Math.floor((+day.monday-+termDays.start)/7)+1;return{year:year,season:season,current:current,week:week,finals:finals}}else{return{year:year,season:season,current:current,week:-1,finals:false}}}function termCode(year,quarter){return quarter+(year%100).toString().padStart(2,"0")}function termName(year,quarter){return`${names[quarter]} ${year}`}if(importMeta.main){console.log(["Start year","Fall start","Fall end","Winter start","Spring end"].join("\t"));for(let year=2005;year<=2028;year++){const{end:springEnd}=getTermDays(year,"SP");const{start:fallStart,end:fallEnd}=getTermDays(year,"FA");const{start:winterStart}=getTermDays(year+1,"WI");console.log([+fallStart-+springEnd,+winterStart-+fallEnd].join("\t"))}}function useLast(init,value){const ref=w1(init);if(value!==null&&value!==undefined){ref.current=value}return ref.current}const __default=JSON.parse('{\n  "$schema": "../schemas/locations.schema.json",\n  "comment": [\n    "https://registrar.ucsd.edu/StudentLink/bldg_codes.html",\n    "For locations, go onto Google Maps, right click on approximate center of building, click on coordinates to copy.",\n    "I omit \'College\' and \'Outdoor Classroom\' from building names, but not \'Building.\'"\n  ],\n  "colleges": {\n    "seventh": {\n      "OTRSN": {\n        "location": [32.88665760836001, -117.24102406579628],\n        "name": "Otterson Hall",\n        "images": [\n          "https://i.imgur.com/2DncCdV.jpeg",\n          "https://i.imgur.com/nuuiXO9.jpeg",\n          "https://i.imgur.com/ByRotXZ.jpeg",\n          "https://i.imgur.com/rh1PE4K.jpeg",\n          "https://i.imgur.com/k8Bubgx.jpeg"\n        ]\n      },\n      "SEVW2": {\n        "location": [32.8880285561251, -117.24255222849888],\n        "name": "Seventh West Building 2",\n        "images": []\n      },\n      "SEVE3": {\n        "location": [32.88825009555447, -117.24173440393453],\n        "name": "Seventh East Ecoflats 3",\n        "images": [\n          "https://i.imgur.com/RFVU7xr.jpeg",\n          "https://i.imgur.com/81Y5Bqh.jpeg",\n          "https://i.imgur.com/z85Z6w3.jpeg",\n          "https://i.imgur.com/K7KBhkk.jpeg",\n          "https://i.imgur.com/46FqmYp.jpeg",\n          "https://i.imgur.com/A7z04lV.jpeg"\n        ]\n      },\n      "SEVE4": {\n        "location": [32.88807303667593, -117.2417902045747],\n        "name": "Seventh East Ecoflats 4",\n        "images": [\n          "https://i.imgur.com/rvX3WRu.jpeg",\n          "https://i.imgur.com/3HtM3MY.jpeg",\n          "https://i.imgur.com/7qsGG1G.jpeg",\n          "https://i.imgur.com/A7z04lV.jpeg"\n        ]\n      },\n      "WFH": {\n        "location": [32.886967814911024, -117.24173638805067],\n        "name": "Wells Fargo Hall",\n        "images": [\n          "https://i.imgur.com/JwSFFD5.jpeg",\n          "https://i.imgur.com/wd4xodE.jpeg",\n          "https://i.imgur.com/gPAVIsw.jpeg",\n          "https://i.imgur.com/k8Bubgx.jpeg"\n        ]\n      }\n    },\n    "erc": {\n      "ASANT": {\n        "location": [32.88423744331073, -117.24213984468823],\n        "name": "Asante House",\n        "images": [\n          "https://i.imgur.com/41b7QoK.jpeg",\n          "https://i.imgur.com/cg9qmez.jpeg",\n          "https://i.imgur.com/KAX1Krl.jpeg"\n        ]\n      },\n      "ERCA": {\n        "location": [32.886087113975414, -117.24205254723678],\n        "name": "ERC Administration",\n        "images": [\n          "https://i.imgur.com/zTuN3ki.jpeg",\n          "https://i.imgur.com/K38yRo7.jpeg",\n          "https://i.imgur.com/xsRVr2m.jpeg",\n          "https://i.imgur.com/jQdIpgH.jpeg"\n        ]\n      },\n      "GREAT": {\n        "location": [32.883944240936444, -117.24193249617227],\n        "name": "Great Hall",\n        "images": [\n          "https://i.imgur.com/2iS1TGa.jpeg",\n          "https://i.imgur.com/OKLA6JX.jpeg",\n          "https://i.imgur.com/2v7svKU.jpeg"\n        ]\n      },\n      "LASB": {\n        "location": [32.88557327735999, -117.2413567320843],\n        "name": "Latin American Studies Building",\n        "images": ["https://i.imgur.com/kP1FInU.jpeg"]\n      },\n      "RBC": {\n        "location": [32.88427044449085, -117.2408680383893],\n        "name": "Robinson Building Complex",\n        "images": [\n          "https://i.imgur.com/SDNf4ci.jpeg",\n          "https://i.imgur.com/jQMCHrY.jpeg",\n          "https://i.imgur.com/G0GLZQD.jpeg",\n          "https://i.imgur.com/XrAZzhh.jpeg",\n          "https://i.imgur.com/1ysjMHf.jpeg"\n        ],\n        "comment": [\n          "https://gps.ucsd.edu/_files/misc/GPS-Printable-Map-2015.pdf",\n          "I think Garner is part of this"\n        ]\n      },\n      "SSB": {\n        "location": [32.88391338508008, -117.24045720071513],\n        "name": "Social Sciences Building",\n        "images": [\n          "https://i.imgur.com/bHveajb.jpeg",\n          "https://i.imgur.com/0V90Tca.jpeg",\n          "https://i.imgur.com/5A2kawY.jpeg",\n          "https://i.imgur.com/t15im8k.jpeg"\n        ]\n      }\n    },\n    "marshall": {\n      "CSB": {\n        "location": [32.880517237245954, -117.23939317415764],\n        "name": "Cognitive Science Building",\n        "images": [\n          "https://i.imgur.com/CXa715U.jpeg",\n          "https://i.imgur.com/6NiZ46R.jpeg",\n          "https://i.imgur.com/wSSxyyj.jpeg",\n          "https://i.imgur.com/fSMNNuc.jpeg",\n          "https://i.imgur.com/riutYQz.jpeg",\n          "https://i.imgur.com/pa0BSpr.jpeg",\n          "https://i.imgur.com/jZvJO05.jpeg"\n        ]\n      },\n      "ECON": {\n        "location": [32.88235588485967, -117.24040328432459],\n        "name": "Economics Building",\n        "images": [\n          "https://i.imgur.com/MTxt62o.jpeg",\n          "https://i.imgur.com/iQIL8bu.jpeg",\n          "https://i.imgur.com/xnokzUN.jpeg",\n          "https://i.imgur.com/YY7YmrA.jpeg"\n        ]\n      },\n      "PETER": {\n        "location": [32.879984046654364, -117.2402525268966],\n        "name": "Peterson Hall",\n        "images": [\n          "https://i.imgur.com/7O3YLwu.jpeg",\n          "https://i.imgur.com/kZeE8oF.jpeg",\n          "https://i.imgur.com/ryxGEki.jpeg",\n          "https://i.imgur.com/JWDIvEy.jpeg",\n          "https://i.imgur.com/ZwBOssV.jpeg"\n        ]\n      },\n      "SEQUO": {\n        "location": [32.88203974495475, -117.24103633144476],\n        "name": "Sequoyah Hall",\n        "images": [\n          "https://i.imgur.com/YXgBI1O.jpeg",\n          "https://i.imgur.com/UJa4KNw.jpeg",\n          "https://i.imgur.com/NUqDM5a.jpeg",\n          "https://i.imgur.com/f7EFZpT.jpeg",\n          "https://i.imgur.com/7zLoJjJ.jpeg",\n          "https://i.imgur.com/KBUySt6.jpeg"\n        ]\n      },\n      "SOLIS": {\n        "location": [32.880935740253626, -117.23964750230745],\n        "name": "Solís Hall",\n        "images": [\n          "https://i.imgur.com/bZzkyvr.jpeg",\n          "https://i.imgur.com/EeChtxt.jpeg",\n          "https://i.imgur.com/CXa715U.jpeg"\n        ]\n      },\n      "SSRB": {\n        "location": [32.88075657728253, -117.240142743495],\n        "name": "Social Sciences Research Building",\n        "images": [\n          "https://i.imgur.com/ktWIzDA.jpeg",\n          "https://i.imgur.com/suB1Zw2.jpeg",\n          "https://i.imgur.com/suB1Zw2.jpeg",\n          "https://i.imgur.com/batB9YN.jpeg",\n          "https://i.imgur.com/gNdZy7z.jpeg",\n          "https://i.imgur.com/wOK32RL.jpeg",\n          "https://i.imgur.com/2Ne0Zz3.jpeg"\n        ]\n      },\n      "TM102": {\n        "location": [32.88134401507817, -117.23933111579409],\n        "name": "Thurgood Marshall 102",\n        "images": ["https://i.imgur.com/gGIHRxo.jpeg"]\n      }\n    },\n    "sixth": {\n      "CTL": {\n        "location": [32.880720265920914, -117.24142517100402],\n        "name": "Catalyst",\n        "images": [\n          "https://i.imgur.com/Wgtxcio.jpeg",\n          "https://i.imgur.com/TApNHHe.jpeg",\n          "https://i.imgur.com/UzvzE2n.jpeg",\n          "https://i.imgur.com/PgRu7iI.jpeg",\n          "https://i.imgur.com/brkGKmT.jpeg",\n          "https://i.imgur.com/MzO8kdg.jpeg"\n        ]\n      },\n      "JEANN": {\n        "location": [32.8799296621332, -117.24119652096547],\n        "name": "The Jeannie",\n        "images": [\n          "https://i.imgur.com/S7hWyFi.jpeg",\n          "https://i.imgur.com/Gr72SGn.jpeg",\n          "https://i.imgur.com/jcmweDB.jpeg",\n          "https://i.imgur.com/7g2ddgc.jpeg",\n          "https://i.imgur.com/H3pf35p.jpeg",\n          "https://i.imgur.com/WXEOHoX.jpeg",\n          "https://i.imgur.com/0SCGaj1.jpeg"\n        ]\n      },\n      "MOS": {\n        "location": [32.88001190738399, -117.24163094823878],\n        "name": "Mosaic",\n        "images": [\n          "https://i.imgur.com/mMpazXy.jpeg",\n          "https://i.imgur.com/kOoJMGj.jpeg",\n          "https://i.imgur.com/uYLVGh5.jpeg",\n          "https://i.imgur.com/PiC2Cb8.jpeg",\n          "https://i.imgur.com/FHpBJYo.jpeg",\n          "https://i.imgur.com/6woeDzV.jpeg",\n          "https://i.imgur.com/6woeDzV.jpeg"\n        ]\n      },\n      "RWAC": {\n        "location": [32.880374742852574, -117.24106684310492],\n        "name": "Ridge Walk Academic Complex",\n        "images": [\n          "https://i.imgur.com/wzZrECe.jpeg",\n          "https://i.imgur.com/rHbydi1.jpeg",\n          "https://i.imgur.com/bckfXJi.jpeg",\n          "https://i.imgur.com/6hH79mc.jpeg",\n          "https://i.imgur.com/OHUnhy9.jpeg",\n          "https://i.imgur.com/jBTe18L.jpeg",\n          "https://i.imgur.com/cga1K75.jpeg",\n          "https://i.imgur.com/ltI4q8O.jpeg",\n          "https://i.imgur.com/8yGvvrA.jpeg",\n          "https://i.imgur.com/PKQ0Eda.jpeg",\n          "https://i.imgur.com/GJlru9N.jpeg",\n          "https://i.imgur.com/pvCEee4.jpeg",\n          "https://i.imgur.com/U817BWw.jpeg"\n        ]\n      }\n    },\n    "muir": {\n      "APM": {\n        "location": [32.87900949086575, -117.24105009713044],\n        "name": "Applied Physics and Mathematics",\n        "images": [\n          "https://i.imgur.com/89vhOWC.jpeg",\n          "https://i.imgur.com/1xFYiGu.jpeg",\n          "https://i.imgur.com/89vhOWC.jpeg",\n          "https://i.imgur.com/FloMKYA.jpeg"\n        ]\n      },\n      "BIO": {\n        "location": [32.878428690703146, -117.24103674033825],\n        "name": "Biology Building",\n        "images": [\n          "https://i.imgur.com/voBOeaq.jpeg",\n          "https://i.imgur.com/7fdINBO.jpeg",\n          "https://i.imgur.com/BklsyEi.jpeg"\n        ]\n      },\n      "HSS": {\n        "location": [32.87834508545459, -117.24168835799722],\n        "name": "Humanities and Social Sciences Building",\n        "images": [\n          "https://i.imgur.com/Lue4Hz0.jpeg",\n          "https://i.imgur.com/ESTU5K4.jpeg",\n          "https://i.imgur.com/hoq0JCh.jpeg",\n          "https://i.imgur.com/q36eBkZ.jpeg"\n        ]\n      },\n      "LEDDN": {\n        "location": [32.87876783002103, -117.24168242455174],\n        "name": "Ledden Auditorium",\n        "images": [\n          "https://i.imgur.com/TeEhzeV.jpeg",\n          "https://i.imgur.com/BklsyEi.jpeg",\n          "https://i.imgur.com/TqvKBYJ.jpeg"\n        ]\n      },\n      "MANDE": {\n        "location": [32.877812337766414, -117.23998508397895],\n        "name": "Mandeville Center",\n        "images": [\n          "https://i.imgur.com/2yXTr9k.jpeg",\n          "https://i.imgur.com/w93BY9I.jpeg",\n          "https://i.imgur.com/4MCnqQs.jpeg",\n          "https://i.imgur.com/kUJwqWS.jpeg",\n          "https://i.imgur.com/vcZNcYB.jpeg",\n          "https://i.imgur.com/aW79Stz.jpeg",\n          "https://i.imgur.com/Xb8Lgc3.jpeg"\n        ]\n      },\n      "MCGIL": {\n        "location": [32.87900601797463, -117.24205773606351],\n        "name": "McGill Hall",\n        "images": [\n          "https://i.imgur.com/ean0Xw4.jpeg",\n          "https://i.imgur.com/FAyAZ2g.jpeg",\n          "https://i.imgur.com/oKUKr7n.jpeg",\n          "https://i.imgur.com/RyCAZpz.jpeg"\n        ]\n      },\n      "MNDLR": {\n        "location": [32.87928595670899, -117.24214505416418],\n        "name": "Mandler Hall",\n        "images": [\n          "https://i.imgur.com/wHkcEkv.jpeg",\n          "https://i.imgur.com/VjGXYpA.jpeg"\n        ]\n      },\n      "RECGM": {\n        "location": [32.87672837413399, -117.24124478552716],\n        "name": "Recreation Gym",\n        "images": ["https://i.imgur.com/qRSwZXl.jpeg"]\n      }\n    },\n    "revelle": {\n      "BONN": {\n        "location": [32.876084946774036, -117.24038814500676],\n        "name": "Bonner Hall",\n        "images": [\n          "https://i.imgur.com/O46bvAl.jpeg",\n          "https://i.imgur.com/C9iPmC5.jpeg",\n          "https://i.imgur.com/PAzV1gB.jpeg"\n        ]\n      },\n      "GH": {\n        "location": [32.87374584111353, -117.24092662366324],\n        "name": "Galbraith Hall",\n        "images": [\n          "https://i.imgur.com/cRjQv3U.jpeg",\n          "https://i.imgur.com/diEDnqe.jpeg",\n          "https://i.imgur.com/LkEDdjA.jpeg",\n          "https://i.imgur.com/5ZlmhSL.jpeg"\n        ]\n      },\n      "MAYER": {\n        "location": [32.87528696893803, -117.24019479635555],\n        "name": "Mayer Hall",\n        "images": [\n          "https://i.imgur.com/EdHd4Ud.jpeg",\n          "https://i.imgur.com/RnOIVMS.jpeg"\n        ]\n      },\n      "MYR-A": {\n        "location": [32.87536189399691, -117.23970412241734],\n        "name": "Mayer Hall Addition",\n        "images": ["https://i.imgur.com/GWhZi3j.jpeg"]\n      },\n      "NSB": {\n        "location": [32.87527130105447, -117.24282324774462],\n        "name": "Natural Sciences Building",\n        "images": [\n          "https://i.imgur.com/gHCTVsy.jpeg",\n          "https://i.imgur.com/p0Gb9tw.jpeg",\n          "https://i.imgur.com/R6YKwCR.jpeg",\n          "https://i.imgur.com/LJyRUbq.jpeg",\n          "https://i.imgur.com/Dj4bcaH.jpeg",\n          "https://i.imgur.com/7swuR0z.jpeg"\n        ]\n      },\n      "PACIF": {\n        "location": [32.87595284128824, -117.24210006678864],\n        "name": "Pacific Hall",\n        "images": [\n          "https://i.imgur.com/icFVT7s.jpeg",\n          "https://i.imgur.com/ql0yrzo.jpeg",\n          "https://i.imgur.com/7swuR0z.jpeg",\n          "https://i.imgur.com/SZBGFAD.jpeg",\n          "https://i.imgur.com/O57GZsU.jpeg",\n          "https://i.imgur.com/gHurrsx.jpeg"\n        ]\n      },\n      "REV": {\n        "location": [32.87480385710217, -117.24096166711239],\n        "name": "Revelle Plaza",\n        "images": [\n          "https://i.imgur.com/C1hf2i4.jpeg",\n          "https://i.imgur.com/WswaxG1.jpeg",\n          "https://i.imgur.com/xgdoadK.jpeg"\n        ],\n        "comment": ["Revelle Plaza Outdoor Classroom"]\n      },\n      "RVCOM": {\n        "location": [32.87457496393089, -117.2425008415767],\n        "name": "Revelle Commons",\n        "images": [\n          "https://i.imgur.com/LC6z27w.jpeg",\n          "https://i.imgur.com/cZOtJyZ.jpeg",\n          "https://i.imgur.com/M8mLc0O.jpeg",\n          "https://i.imgur.com/tkfsNCA.jpeg"\n        ]\n      },\n      "TATA": {\n        "location": [32.876460769081355, -117.24152230144844],\n        "name": "Tata Hall",\n        "images": [\n          "https://i.imgur.com/xgg8MgX.jpeg",\n          "https://i.imgur.com/RXHiy6H.jpeg"\n        ]\n      },\n      "UREY": {\n        "location": [32.875555403867246, -117.2412962102085],\n        "name": "Urey Hall",\n        "images": [\n          "https://i.imgur.com/GHh8eKi.jpeg",\n          "https://i.imgur.com/WJoatRZ.jpeg",\n          "https://i.imgur.com/tw8jQvV.jpeg",\n          "https://i.imgur.com/x25Ffeu.jpeg",\n\n          "https://i.imgur.com/eeDOB4E.jpeg",\n          "https://i.imgur.com/v8NnQ5W.jpeg"\n        ]\n      },\n      "YORK": {\n        "location": [32.87454593562147, -117.24000502137861],\n        "name": "York Hall",\n        "images": [\n          "https://i.imgur.com/ZSk3HVG.jpeg",\n          "https://i.imgur.com/OlQ1P94.jpeg",\n          "https://i.imgur.com/nSvISfv.jpeg",\n          "https://i.imgur.com/NY73bP9.jpeg"\n        ],\n        "comment": [\n          "Herbert F. York Undergraduate Sciences Building",\n          "TODO: Take photos now that the facade construction is done."\n        ]\n      }\n    },\n    "eighth": {\n      "DANCE": {\n        "location": [32.87186729617818, -117.24003377110412],\n        "name": "Molli and Arthur Wagner Dance Building",\n        "images": [\n          "https://i.imgur.com/IjcxcYu.jpeg",\n          "https://i.imgur.com/mZqSm9K.jpeg",\n          "https://i.imgur.com/Ff2omog.jpeg",\n          "https://i.imgur.com/Cd9qF5k.jpeg"\n        ]\n      },\n      "MWEIS": {\n        "location": [32.87095079844769, -117.24121579783444],\n        "name": "Mandell Weiss Theatre",\n        "images": [\n          "https://i.imgur.com/hFfdmH0.jpeg",\n          "https://i.imgur.com/axNZj29.jpeg",\n          "https://i.imgur.com/7XrSpQc.jpeg",\n          "https://i.imgur.com/U1yMrNx.jpeg"\n        ],\n        "comment": [\n          "According to http://m.ucsd.edu/maps/static/location/5?query=&no_server_init it\'s the theater not forum"\n        ]\n      },\n      "PODEM": {\n        "location": [32.87340196755349, -117.24174621477657],\n        "name": "Podemos",\n        "images": [],\n        "comment": [\n          "https://www.reddit.com/r/UCSD/comments/13pua2j/podem_1a18/"\n        ]\n      },\n      "POTKR": {\n        "location": [32.87110810161448, -117.24052277636109],\n        "name": "Sheila and Hughes Potiker Theatre",\n        "images": [\n          "https://i.imgur.com/g5FaydY.jpeg",\n          "https://i.imgur.com/sUsYzqf.jpeg"\n        ],\n        "comment": [\n          "This is the building with the big glass windows that say \'La Jolla Playhouse.\' It\'s labelled as La Jolla Playhouse on the map."\n        ]\n      }\n    },\n    "warren": {\n      "EBU1": {\n        "location": [32.88168612813114, -117.2352758424052],\n        "name": "Jacobs Hall",\n        "images": [\n          "https://i.imgur.com/KqK2iLM.jpeg",\n          "https://i.imgur.com/6vAmVAz.jpeg",\n          "https://i.imgur.com/TAqZDMr.jpeg",\n          "https://i.imgur.com/5heLBXk.jpeg",\n          "https://i.imgur.com/z9nZx9E.jpeg"\n        ]\n      },\n      "EBU2": {\n        "location": [32.88116494369773, -117.23334050065942],\n        "name": "Engineering Building Unit II",\n        "images": [\n          "https://i.imgur.com/hABuTPh.jpeg",\n          "https://i.imgur.com/W3BFNPh.jpeg"\n        ]\n      },\n      "EBU3B": {\n        "location": [32.8817383470234, -117.23358830529953],\n        "name": "Computer Science and Engineering Building",\n        "images": [\n          "https://i.imgur.com/cIKcb6i.jpeg",\n          "https://i.imgur.com/840Ijht.jpeg",\n          "https://i.imgur.com/EHbekQN.jpeg",\n          "https://i.imgur.com/989kevK.jpeg"\n        ]\n      },\n      "FAH": {\n        "location": [32.883557123107536, -117.23496426482438],\n        "name": "Franklin Antonio Hall",\n        "images": [\n          "https://i.imgur.com/MGZugul.jpeg",\n          "https://i.imgur.com/dMr7V2X.jpeg",\n          "https://i.imgur.com/TbzWfMa.jpeg"\n        ]\n      },\n      "PFBH": {\n        "location": [32.88173836638747, -117.2343791731388],\n        "name": "Powell-Focht Bioengineering Hall",\n        "images": ["https://i.imgur.com/lYP4GT9.jpeg"]\n      },\n      "WARR": {\n        "location": [32.88114818094256, -117.23504265009306],\n        "name": "Warren Mall",\n        "images": [\n          "https://i.imgur.com/zqg1cHJ.jpeg",\n          "https://i.imgur.com/zlTUVJf.jpeg"\n        ],\n        "comment": ["Warren Mall Outdoor Classroom"]\n      },\n      "WLH": {\n        "location": [32.88059104682919, -117.23436049332548],\n        "name": "Warren Lecture Hall",\n        "images": [\n          "https://i.imgur.com/YEaKlBF.jpeg",\n          "https://i.imgur.com/Kdv8YiX.jpeg"\n        ]\n      },\n      "WSAC": {\n        "location": [32.88246082957613, -117.23329893891902],\n        "name": "Warren Student Activities Center",\n        "images": [\n          "https://i.imgur.com/DRjFAFy.jpeg",\n          "https://i.imgur.com/Q3u5WgD.jpeg",\n          "https://i.imgur.com/Byuu0Vw.jpeg"\n        ]\n      }\n    },\n    "pepperCanyon": {\n      "DIB": {\n        "location": [32.87937650181871, -117.23229157766367],\n        "name": "Design & Innovation Building",\n        "images": []\n      },\n      "PCYNH": {\n        "location": [32.878341870703316, -117.23391147692307],\n        "name": "Pepper Canyon Hall",\n        "images": []\n      },\n      "SME": {\n        "location": [32.879887628129154, -117.23275634017203],\n        "name": "Structural and Materials Engineering Building",\n        "images": []\n      },\n      "VAF": {\n        "location": [32.879139240878324, -117.23396876625009],\n        "name": "Visual Arts Facility",\n        "images": []\n      }\n    },\n    "universityCenter": {\n      "CENTR": {\n        "location": [32.87797399985619, -117.237243418587],\n        "name": "Center Hall",\n        "images": []\n      },\n      "CSC": {\n        "location": [32.87840034888087, -117.23791254127356],\n        "name": "Career Services Center",\n        "images": []\n      },\n      "CPMC": {\n        "location": [32.87808507377693, -117.23466682590514],\n        "name": "Conrad Presbys Music Center",\n        "images": []\n      },\n      "P416": {\n        "location": [32.87775532737337, -117.23812995691154],\n        "name": "Center Hall",\n        "images": ["Parking Lot P416"],\n        "comment": ["P416 Outdoor Classroom"]\n      },\n      "PRICE": {\n        "location": [32.879954671864304, -117.23711807270978],\n        "name": "Price Center",\n        "images": []\n      },\n      "SERF": {\n        "location": [32.87969838069206, -117.23507094146997],\n        "name": "Science & Engineering Research Facility",\n        "images": []\n      },\n      "U201": {\n        "location": [32.87750663014029, -117.23672981527089],\n        "name": "University Center 201",\n        "images": []\n      },\n      "U301": {\n        "location": [32.87773977889938, -117.23584205327144],\n        "name": "University Center 301",\n        "images": []\n      }\n    },\n    "med": {\n      "BRF2": {\n        "location": [32.874320265698685, -117.2350725903077],\n        "name": "Biomedical Research Facility II",\n        "images": []\n      },\n      "BSB": {\n        "location": [32.87583620115867, -117.23610217780087],\n        "name": "Biomedical Sciences Building",\n        "images": []\n      },\n      "CMME": {\n        "location": [32.876369320524, -117.23767828382417],\n        "name": "Cellular and Molecular Medicine East",\n        "images": []\n      },\n      "CNCB": {\n        "location": [32.87569310599253, -117.23819914713752],\n        "name": "Center for Neural Circuits and Behavior",\n        "images": []\n      },\n      "KECK": {\n        "location": [32.87504438926279, -117.23617314958287],\n        "name": "W. M. Keck Building",\n        "images": []\n      },\n      "LFFB": {\n        "location": [32.87668499513593, -117.23686452737942],\n        "name": "Leichtag Biomedical Research Building",\n        "images": []\n      },\n      "MET": {\n        "location": [32.875220419083554, -117.23478623990438],\n        "name": "Medical Education and Telemedicine Building",\n        "images": []\n      },\n      "MTF": {\n        "location": [32.87559622253949, -117.23543639784786],\n        "name": "Medical Teaching Facility",\n        "images": []\n      },\n      "PSB": {\n        "location": [32.874209066736114, -117.23571795183558],\n        "name": "Skaggs Pharmaceutical Sciences Building",\n        "images": []\n      },\n      "SCRB": {\n        "location": [32.8758549279704, -117.23394815633426],\n        "name": "Stein Clinical Research Building",\n        "images": []\n      }\n    },\n    "health": {\n      "MCC": {\n        "location": [32.87832294065095, -117.22294309501584],\n        "name": "Moores Cancer Center",\n        "images": []\n      }\n    },\n    "sio": {\n      "ECKRT": {\n        "location": [32.8672217685922, -117.25258463073409],\n        "name": "Eckart Building",\n        "images": []\n      },\n      "HUBBS": {\n        "location": [32.86744021132684, -117.25344551951103],\n        "name": "Hubbs Hall",\n        "images": []\n      },\n      "HYDRO": {\n        "location": [32.86889985285985, -117.25226455555327],\n        "name": "Hydraulics Laboratory",\n        "images": []\n      },\n      "IGPP": {\n        "location": [32.86830699100889, -117.25287278628777],\n        "name": "Institute of Geophysics and Planetary Physics",\n        "images": []\n      },\n      "NIERN": {\n        "location": [32.86846701354387, -117.25120611888595],\n        "name": "Nierenberg Hall",\n        "images": []\n      },\n      "OAR": {\n        "location": [32.86949599612524, -117.25063208743448],\n        "name": "Keck Oceanographic and Atmospheric Research",\n        "images": [],\n        "comment": [\n          "https://blink.ucsd.edu/sponsor/advancement/advancement-services/stewardship/named-buildings/keck-oceanographic-atmospheric-research-2.html"\n        ]\n      },\n      "MCTF": {\n        "location": [32.87120629806947, -117.25201093495335],\n        "name": "Marine Conservation and Technology Facility",\n        "images": []\n      },\n      "RITTR": {\n        "location": [32.86529347606621, -117.25357019529167],\n        "name": "Ritter Hall",\n        "images": []\n      },\n      "SPIES": {\n        "location": [32.86909245015263, -117.25095900205372],\n        "name": "Spiess Hall",\n        "images": []\n      },\n      "SUMNR": {\n        "location": [32.86488587494083, -117.2529119246211],\n        "name": "Sumner Auditorium",\n        "images": []\n      },\n      "VAUGN": {\n        "location": [32.86531011859729, -117.25300219413253],\n        "name": "Vaughan Hall",\n        "images": []\n      }\n    }\n  }\n}');const buildings={};for(const[college,collegeBldgs]of Object.entries(__default.colleges)){for(const[code,{location:location,name:name,images:images}]of Object.entries(collegeBldgs).sort(((a,b)=>b[1].location[0]-a[1].location[0]))){buildings[code]={name:name,code:code,college:college,location:[location[0],location[1]],images:images}}}class Time{hour;minute;constructor(hour,minute){this.hour=hour;this.minute=minute}toString(hour24=false){const minute=this.minute.toString().padStart(2,"0");return hour24?`${this.hour.toString().padStart(2,"0")}:${minute}`:`${(this.hour+11)%12+1}:${minute} ${this.hour<12?"a":"p"}m`}valueOf(){return this.hour*60+this.minute}static from(minutes){return new Time(Math.floor(minutes/60),minutes%60)}static parse24(string){const[hour,minute]=string.split(":").map(Number);if(Number.isInteger(hour)&&hour>=0&&hour<24&&Number.isInteger(minute)&&minute>=0&&minute<60){return new Time(hour,minute)}else{return null}}}function coursesToClassrooms(courses,{finals:finals=false,monday:monday}){const holidays=getHolidays(monday.year);const nextMonday=monday.add(7);const buildings={};for(const[i,{code:code,groups:groups}]of courses.entries()){for(const[j,{sections:sections,meetings:meetings,exams:exams,dateRange:dateRange}]of groups.entries()){const groupCapacity=sections.reduce(((cum,curr)=>cum+curr.capacity),0);const allMeetings=[...sections,...meetings,...exams];for(const meeting of allMeetings){const{location:location,time:time}=meeting;if(!time||!location||location.building==="RCLAS"){continue}if(meeting.kind==="exam"){if(meeting.date<monday||meeting.date>=nextMonday){continue}}else if(finals){continue}const days=time.days.filter((weekday=>{const day=monday.add((weekday+6)%7);if(holidays[day.id]){return false}if(dateRange&&meeting.kind!=="exam"){return dateRange.start<=day&&day<=dateRange.end}return true}));if(days.length===0){continue}buildings[location.building]??={};buildings[location.building][location.room]??=[];buildings[location.building][location.room].push({...meeting,days:days,start:Time.from(time.start),end:Time.from(time.end),capacity:meeting.kind==="section"?meeting.capacity:groupCapacity,course:code,index:{group:i,meeting:j},special:dateRange!==undefined&&meeting.kind!=="exam"})}}}return buildings}const TILE_LEFT=-6;const SCALE=2**(7+17)*1.5;function latLongToPixel([latitude,longitude]){return{x:SCALE*(longitude/180+1),y:-SCALE*(Math.log(Math.tan(Math.PI/4+latitude*Math.PI/360))/Math.PI+1)}}const coords=Object.values(buildings).map((({location:location})=>location));function getExtremeCoord(index,max){return coords.reduce(((acc,curr)=>(max?Math.max:Math.min)(acc,curr[index])),max?-Infinity:Infinity)}const southwest=latLongToPixel([getExtremeCoord(0,false),getExtremeCoord(1,false)]);const northeast=latLongToPixel([getExtremeCoord(0,true),getExtremeCoord(1,true)]);const MAP_TILE_SIZE=256*1.5;const center=latLongToPixel([32.877341347399,-117.23531663418]);const mapPosition={x:Math.floor(center.x/MAP_TILE_SIZE+TILE_LEFT)*MAP_TILE_SIZE-(southwest.x-50),y:Math.floor(center.y/MAP_TILE_SIZE-4)*MAP_TILE_SIZE-(northeast.y-50),width:(5-TILE_LEFT+1)*MAP_TILE_SIZE};const TIME_ZONE="America/Los_Angeles";function inPT(){const{timeZone:timeZone}=(new Intl.DateTimeFormat).resolvedOptions();return timeZone===TIME_ZONE}function toPT(date){const string=date.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:TIME_ZONE});const match=string.match(/^(\d\d)\/(\d\d)\/(\d{4}), (\d\d):(\d\d) ([AP]M)$/);if(match){return{date:Day.from(+match[3],+match[1],+match[2]),time:new Time(match[4]==="12"?match[6]==="AM"?0:12:+match[4]+(match[6]==="PM"?12:0),+match[5])}}else{console.warn(string,"did not match expected PT format.");return{date:Day.fromLocal(date),time:new Time(date.getHours(),date.getMinutes())}}}function now(){return toPT(new Date)}function used(weekday,time,includeBefore=0){return meeting=>meeting.days.includes(weekday)&&+meeting.start-includeBefore<=+time&&time<meeting.end}const importMeta1={url:"file:///home/sheep/uxdy/classrooms/lib/coursesFromFile.ts",main:false};class StringTaker{#string;#index=0;constructor(string){this.#string=string}discard(chars){this.#index+=chars;return null}take(chars){this.#index+=chars;return this.#string.slice(this.#index-chars,this.#index).trim()}takeInt(chars){return+this.take(chars)}takeRest(){return this.#string.slice(this.#index)}#takeMinutes(){const time=this.take(4);return+time.slice(0,2)*60+ +time.slice(2)}takeMeeting(day=null){const building=this.take(5);const days=day===null?this.take(5):String(day);return{type:this.take(2),location:building==="TBA"?this.discard(5):{building:building,room:this.take(5)},time:days!=="TBA"?{days:Array.from(days,Number),start:this.#takeMinutes(),end:this.#takeMinutes()}:this.discard(8)}}hasMore(){return this.#index<this.#string.length}}class CourseFormatError extends SyntaxError{name=this.constructor.name}function coursesFromFile(file,includeDateRange=false){const courses=[];let state={type:"course-or-group"};const lines=file.trim().split(/\r?\n/);const metadata=new StringTaker(lines.shift()??"");if(metadata.take(2)!=="V3"){throw new CourseFormatError("I don't understand the format the courses are in.")}const scraped=new Date(+metadata.takeRest());for(const line of lines){const taker=new StringTaker(line);const course=courses[courses.length-1];const group=course?.groups[course.groups.length-1];if(state.type==="course-or-group"){if(/^[A-Z]/.test(line)){const code=[taker.take(4),taker.take(5)].join(" ");const[title,catalog]=taker.takeRest().split("\t");courses.push({code:code,title:title,catalog:catalog,groups:[]})}else{const additionalMeetings=taker.take(1);course.groups.push({code:taker.take(3),dateRange:includeDateRange?{start:Day.from(taker.takeInt(4),taker.takeInt(2),taker.takeInt(2)),end:Day.from(taker.takeInt(4),taker.takeInt(2),taker.takeInt(2))}:undefined,instructors:taker.takeRest().split("\t").filter((name=>name!=="")).map((name=>{const[first,last]=name.split(",");return{first:first,last:last}})),sections:[],meetings:[],exams:[],coscheduled:[]});state={type:"sections",hasMeetings:additionalMeetings===":"||additionalMeetings===".",hasExams:additionalMeetings===":"||additionalMeetings==="'"}}}else if(state.type==="sections"){while(taker.hasMore()){const capacity=taker.takeInt(4);group.sections.push({kind:"section",capacity:capacity===9999?Infinity:capacity,...taker.takeMeeting(),code:taker.take(3)})}state=state.hasMeetings?{type:"meetings",hasExams:state.hasExams}:state.hasExams?{type:"exams"}:{type:"course-or-group"}}else if(state.type==="meetings"){while(taker.hasMore()){group.meetings.push({kind:"meeting",...taker.takeMeeting(),code:taker.take(3)})}state=state.hasExams?{type:"exams"}:{type:"course-or-group"}}else if(state.type==="exams"){while(taker.hasMore()){const date=Day.from(taker.takeInt(4),taker.takeInt(2),taker.takeInt(2));group.exams.push({kind:"exam",date:date,...taker.takeMeeting(date.day)})}state={type:"course-or-group"}}}return{scraped:scraped,courses:courses}}if(importMeta1.main){console.log(coursesFromFile(await Deno.readTextFile(Deno.args[0])).courses[100])}class TermCache{#cache={};async#fetch(term,summer){const response=await fetch(`../data/classrooms-${term}.txt`);if(response.ok){try{return coursesFromFile(await response.text(),summer)}catch(error){if(error instanceof CourseFormatError){window.location.reload()}throw error}}else if(response.status===404){return"unavailable"}else{throw new Error(`HTTP ${response.status} error`)}}#term({year:year,quarter:quarter},full){return full?`${termCode(year,quarter)}-full`:termCode(year,quarter)}request(request,full=false){const termId=this.#term(request,full);const cached=this.#cache[termId]??this.#cache[this.#term(request,true)];if(cached==="unavailable"){return{type:"unavailable",request:request}}else if(cached){return{request:request,result:cached}}else{return this.#fetch(termId,request.quarter==="S3").then((result=>{this.#cache[termId]=result;return result==="unavailable"?{type:"unavailable",request:request}:{request:request,result:result}})).catch((()=>({type:"offline",request:request})))}}}function AbbrevHeading({heading:Heading,abbrev:abbrev,children:children,class:className=""}){return v(Heading,{class:`abbrev-heading ${className}`,children:[v("span",{class:"abbrev",children:abbrev}),v("span",{class:"colon",children:": "}),v("span",{class:"long",children:children})]})}function BackIcon(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"icon",children:v("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}function CloseIcon(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"icon",children:v("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}const exams={FI:"Final Exam",MI:"Midterm",FM:"Film Sessions",PB:"Problem Sessions",OT:"Other Sessions",RE:"Review Sessions",MU:"Make-up Sessions"};const instructionTypes={LE:"Lecture",DI:"Discussion",LA:"Lab",IN:"Independent Study",SE:"Seminar",AC:"Activity",CL:"Clinical Clerkship",CN:"Clinic",CO:"Conference",FW:"Fieldwork",IT:"Internship",OP:"Outside Preparation",PR:"Practicum",SA:"Study Abroad",SI:"Simultaneous Enrlmnt-Other UC",ST:"Studio",TU:"Tutorial",OT:"Other Sessions"};const meetingTypes={...exams,...instructionTypes};function getFloor(roomNum){const digit=roomNum.match(/\d/);if(digit){const basement=roomNum.startsWith("B");return basement?-digit[0]:+digit[0]}else{return 0}}function compareRoomNums(a,b){const aFloor=getFloor(a);const bFloor=getFloor(b);if(aFloor!==bFloor){return aFloor-bFloor}else{return a.localeCompare(b)}}function RoomList({weekday:weekday,time:time,buildingCode:buildingCode,rooms:rooms,onSelect:onSelect}){if(Object.keys(rooms).length===0){return v("div",{class:"empty",children:v("p",{children:"This building isn't used for any classes this week, as far as WebReg is concerned."})})}return v("div",{class:"room-list",children:[v("div",{class:"gradient gradient-sticky gradient-top"}),v("div",{class:"rooms",children:Object.entries(rooms).sort((([a],[b])=>compareRoomNums(a,b))).map((([room,meetings])=>{const activeMeeting=meetings.find(used(weekday,time,10));const soon=activeMeeting&&time<activeMeeting.start;return v("button",{class:`room ${activeMeeting?soon?"soon":"active":"inactive"}`,onClick:()=>onSelect(room),children:[v("div",{className:"room-name",children:[buildingCode," ",room]}),v("div",{className:"current-meeting",children:activeMeeting?v(W,{children:[activeMeeting.course," ",soon?"soon":v(W,{children:["(",v("abbr",{title:meetingTypes[activeMeeting.type],children:activeMeeting.type}),")"]})]}):"Not in use"})]})}))}),v("div",{class:"gradient gradient-sticky gradient-bottom"})]})}const DAYS=[1,2,3,4,5,6,7];const WEEKDAYS=[1,2,3,4,5];function Schedule({weekday:weekday,time:time,meetings:meetings}){const[day,setDay]=k1(null);if(meetings.length===0){return v("div",{class:"empty",children:v("p",{children:"This room isn't used for any classes this week, as far as WebReg is concerned."})})}const hasWeekend=meetings.some((meeting=>meeting.days.includes(6)||meeting.days.includes(7)));const earliest=meetings.reduce(((acc,curr)=>Math.min(acc,+curr.start)),Infinity);const latest=meetings.reduce(((acc,curr)=>Math.max(acc,+curr.end)),-Infinity);const inUse=used(weekday,time);return v("div",{class:"schedule",children:[v("div",{class:"day-names-wrapper",children:[v("div",{class:"gradient gradient-bg gradient-top"}),v("div",{class:"day-names",children:(hasWeekend?DAYS:WEEKDAYS).map((weekDay=>v("button",{class:`day day-name ${weekDay===day?"selected-day":""}`,onClick:()=>setDay((day=>weekDay===day?null:weekDay)),children:Day.dayName(weekDay,"short","en-US")},weekDay)))})]}),v("div",{class:`meetings-wrapper ${day===null?"full-week":""}`,children:(day!==null?[day]:hasWeekend?DAYS:WEEKDAYS).map((day=>v("div",{class:"day meetings",style:{height:`${(latest-earliest)/1}px`},children:[meetings.filter((meeting=>meeting.days.includes(day))).sort(((a,b)=>+a.start-+b.start)).map((meeting=>v("div",{class:`meeting ${inUse(meeting)?"current":""} ${meeting.kind==="exam"?"exam":""}`,style:{top:`${(+meeting.start-earliest)/1}px`,height:`${(+meeting.end-+meeting.start)/1}px`},children:[v("div",{class:"meeting-name",children:[meeting.course," (",v("abbr",{title:meetingTypes[meeting.type],children:meeting.type}),")"]}),v("div",{class:"meeting-time",children:[meeting.start.toString(),"–",meeting.end.toString()]}),meeting.special&&v("abbr",{class:"special-summer",title:"This meeting is from a Special Summer Session course.",children:"S3"})]}))),weekday===day&&earliest<=+time&&+time<latest&&v("div",{class:"now",style:{top:`${(+time-earliest)/1}px`}})]},day)))}),v("div",{class:"disclaimer-wrapper",children:[v("div",{class:"gradient gradient-bg gradient-bottom"}),v("p",{class:"disclaimer",children:"Note: some classes book rooms but don't meet."})]})]})}function BuildingPanelContent({weekday:weekday,time:time,building:building,rooms:rooms,onClose:onClose}){const[selected,setSelected]=k1(null);const room=useLast("",selected);const[imageLoaded,setImageLoaded]=k1(false);const imageUrl=buildings[building.code].images[0]?.replace(/\.jpeg$/,"l.jpeg");return v(W,{children:[v("div",{class:`building-name ${selected?"schedule-view":"list-view"} college-${buildings[building.code].college}`,children:[buildings[building.code].images.length>0&&v("img",{class:`building-image ${imageLoaded?"":"building-image-loading"}`,src:imageUrl,onLoad:()=>setImageLoaded(true)},imageUrl),v("button",{class:"back",onClick:()=>{setSelected(null)},disabled:!selected,children:v(BackIcon,{})}),v(AbbrevHeading,{heading:"h2",abbrev:v("span",{children:[building.code," ",v("span",{class:"room-number",children:room})]}),children:buildings[building.code].name}),v("button",{class:"close",onClick:onClose,children:v(CloseIcon,{})})]}),selected?v(Schedule,{weekday:weekday,time:time,meetings:rooms[selected]??[]}):v(RoomList,{weekday:weekday,time:time,buildingCode:building.code,rooms:rooms,onSelect:setSelected})]})}function BuildingPanel({weekday:weekday,time:time,building:building,rooms:rooms,onClose:onClose,visible:visible,rightPanelOpen:rightPanelOpen}){return v("div",{class:`building-panel ${visible?"":"building-panel-invisible"} ${rightPanelOpen?"right-panel-open":""}`,children:v(BuildingPanelContent,{weekday:weekday,time:time,building:building,rooms:rooms,onClose:onClose},building)})}function BuildingButton({weekday:weekday,time:time,building:building,rooms:rooms,onSelect:onSelect,selected:selected,visible:visible}){const college=building.college;const ref=L1((button=>{if(building.code==="CENTR"&&button){window.requestAnimationFrame((()=>{const{left:left,top:top,width:width,height:height}=button.getBoundingClientRect();button.closest(".buildings")?.scrollBy(left+(-window.innerWidth+width)/2,top+(-window.innerHeight+height)/2)}))}}),[]);const{x:x,y:y}=latLongToPixel(building.location);return v("button",{class:`building-btn college-${college} ${selected?"selected":""} ${visible?"":"building-btn-hidden"}`,style:{left:`${x-southwest.x+50}px`,top:`${y-northeast.y+50}px`},ref:ref,onClick:()=>onSelect(building.code),children:[building.code,v("span",{class:"room-count",children:[v("span",{class:"in-use",children:rooms.filter((meetings=>meetings.some(used(weekday,time)))).length}),"/",rooms.length]})]})}const dateFormat=new Intl.DateTimeFormat([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});function DateTimeButton({date:date,time:time,onClick:onClick,bottomPanelOpen:bottomPanelOpen,disabled:disabled}){const{year:year,season:season,current:current,week:week}=getTerm(date);return v("button",{class:`date-time-button ${bottomPanelOpen?"bottom-panel-open":""}`,onClick:onClick,disabled:disabled,children:[v("p",{class:"showing-schedule-wrapper",children:[v("span",{class:"showing-schedule-text",children:"Showing schedule for"}),v("div",{class:"date-time",children:dateFormat.format(new Date(date.year,date.month,date.date,time.hour,time.minute))}),current&&v("span",{class:"quarter-week",children:[termCode(year,season)," Week ",week," ",date.dayName("short","en-US")]})]}),v("div",{class:"icon-btn edit-icon",children:"Edit"})]})}function CalendarRow({children:children,week:week,class:className=""}){return v("div",{class:`calendar-row ${className}`,children:[v("div",{class:"calendar-week-num",children:week}),children]})}function CalendarHeaderRow(){return v(CalendarRow,{class:"calendar-header-row",week:v("span",{children:"Wk"}),children:DAY_NUMS.map((day=>v("div",{class:`calendar-item calendar-week-day`,children:Day.dayName(day+1,"short","en-US")})))})}function CalendarQuarterHeadingRow({year:year,season:season}){return v(CalendarRow,{class:"calendar-heading-row calendar-quarter-heading-row",children:[v("div",{class:"gradient gradient-bg gradient-bottom"}),v(AbbrevHeading,{heading:"h2",abbrev:termCode(year,season),class:"calendar-heading calendar-quarter-heading",children:termName(year,season)})]})}function CalendarMonthHeadingRow({month:month}){return v(CalendarRow,{class:"calendar-heading-row calendar-month-heading-row",children:v("h3",{class:"calendar-heading calendar-month-heading",children:Day.monthName(month)})})}function CalendarWeekRow({termDays:termDays,start:start,end:end,monday:monday,date:date,onDate:onDate}){const endDay=monday.add(7);const week=Math.floor((monday.id-termDays.start.id)/7)+1;const holidays=getHolidays(Math.max(monday.year,start.year));return v("div",{class:"calendar-row calendar-date-row",children:[v("div",{class:"calendar-week-num",children:week===11?"FI":termDays.start<endDay&&monday<=termDays.end?week:""}),DAY_NUMS.map((i=>{const day=monday.add(i);if(day<start||day>end){return v("div",{class:"calendar-item"})}return v("label",{class:`calendar-item calendar-day ${day>=termDays.finals&&day<=termDays.end?"calendar-finals-day":""} ${day.id===date.id?"calendar-selected":""} ${day>=termDays.start&&day<=termDays.end&&!holidays[day.id]?"":"calendar-break-day"}`,children:[v("input",{type:"radio",class:"visually-hidden",name:"calendar-day",onKeyDown:e=>{if(e.key==="ArrowUp"||e.key==="ArrowDown"){const up=e.key==="ArrowUp";onDate(date.add(up?-7:7));e.preventDefault()}},onInput:()=>onDate(day),checked:day.id===date.id}),day.date]})}))]})}function MonthCalendar({start:start,end:end,scrollMode:scrollMode,month:month,...props}){const{date:date}=props;const monthStart=Day.max(start,Day.from(start.year,month,1));const monthEnd=Day.min(end,Day.from(start.year,month+1,0));const weeks=[];for(let monday=monthStart.monday;monday<=monthEnd;monday=monday.add(7)){weeks.push(v(CalendarWeekRow,{monday:monday,start:monthStart,end:monthEnd,...props},monday.id))}const ref=w1(null);j1((()=>{const div=ref.current;if(div?.parentElement&&scrollMode!=="none"&&date>=monthStart&&date<=monthEnd){div.parentElement.scrollTo({top:div.offsetTop-90,behavior:scrollMode==="init"?"auto":"smooth"})}}),[scrollMode,date.id,monthStart.id,monthEnd.id]);return v("div",{class:"calendar-month",ref:ref,children:[v(CalendarMonthHeadingRow,{month:month}),weeks]})}function TermCalendar(props){const{start:start,end:end}=props;const months=[];for(let month=start.month;month<=end.month;month++){months.push(v(MonthCalendar,{month:month,...props},month))}return v(W,{children:months})}const seasons=["WI","SP","S1","S2","FA"];function Calendar({freeScroll:freeScroll,...props}){const{date:date,scrollMode:scrollMode}=props;const selectedStart=date.month<=6?date.year-1:date.year;const selectedEnd=date.month>=9?date.year+1:date.year;const[start,setStart]=k1(selectedStart);const[end,setEnd]=k1(selectedEnd);if(scrollMode==="date-edited"){if(start!==selectedStart){setStart(selectedStart)}if(end!==selectedEnd){setEnd(selectedEnd)}}j1((()=>{if(document.activeElement instanceof HTMLInputElement&&document.activeElement.name==="calendar-day"&&!document.activeElement.checked){const checked=document.querySelector('[name="calendar-day"]:checked');if(checked instanceof HTMLInputElement){checked.focus()}}}),[date.id]);const calendars=[];for(let year=start;year<=end;year++){const yearTermDays=seasons.map((season=>getTermDays(year,season)));for(const[i,season]of seasons.entries()){calendars.push(v(CalendarQuarterHeadingRow,{year:year,season:season},`${year} ${season} heading`),v(TermCalendar,{termDays:yearTermDays[i],start:i===0?Day.from(year,1,1):yearTermDays[i].start.monday,end:yearTermDays[i+1]?.start.monday.add(-1)??Day.from(year+1,1,0),...props},`${year} ${season}`))}}return v("div",{class:"calendar-scroll-area",children:[v("div",{class:"gradient gradient-sticky gradient-top"}),v(CalendarHeaderRow,{}),v(CalendarRow,{class:"show-year-btn-top",children:v("button",{type:"button",class:"show-year-btn",onClick:e=>{setStart(start-1);freeScroll();const target=e.currentTarget.closest(".calendar-scroll-area")?.querySelector(".calendar-month");if(target instanceof HTMLElement){const oldX=target.offsetTop;window.requestAnimationFrame((()=>{target.parentElement?.scrollTo({top:target.offsetTop-oldX})}))}},children:["Show ",start-1]})}),calendars,v(CalendarRow,{children:v("button",{type:"button",class:"show-year-btn",onClick:()=>{setEnd(end+1);freeScroll()},children:["Show ",end+1]})}),v("div",{class:"gradient gradient-sticky gradient-bottom"})]})}function DateTimePanel({date:date,onDate:onDate,time:time,onTime:onTime,useNow:useNow,onUseNow:onUseNow,visible:visible,class:className,onClose:onClose}){const[scrollMode,setScrollMode]=k1("init");return v("form",{class:`date-time-panel ${visible?"":"date-time-panel-hidden"} ${className} calendar-open`,onSubmit:e=>{onClose();e.preventDefault()},children:[v("div",{class:"date-time-flex",children:[v("label",{class:"checkbox-label",children:[v("input",{type:"checkbox",checked:useNow,onInput:e=>{onUseNow(e.currentTarget.checked);if(e.currentTarget.checked){setScrollMode("date-edited")}}}),v("span",{children:["Use current time",inPT()?null:v("span",{class:"tz-note",children:"(in San Diego)"})]})]}),date.id!==Day.today().id&&v("button",{type:"button",class:"today-btn",onClick:()=>{onDate(Day.today());setScrollMode("date-edited")},children:"Today"}),v("button",{class:"icon-btn close-date-btn",children:"Close"})]}),v("div",{class:"date-time-flex",children:[v("input",{type:"date",name:"date",value:date.toString(),onInput:e=>{const date=Day.parse(e.currentTarget.value);if(date){if(useNow){onUseNow(false)}onDate(date);setScrollMode("date-edited")}},class:"date-input"}),v("input",{type:"time",value:time.toString(true),onInput:e=>{const time=Time.parse24(e.currentTarget.value);if(time){if(useNow){onUseNow(false)}onTime(time)}},class:"time-input"})]}),v(Calendar,{date:date,onDate:date=>{if(useNow){onUseNow(false)}onDate(date);setScrollMode("none")},scrollMode:scrollMode,freeScroll:()=>setScrollMode("none")})]})}function SearchIcon(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",class:"icon",children:v("path",{d:"M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"})})}function TermStatus({status:currentStatus,visible:visible}){const showStatus=visible&&currentStatus&&currentStatus.length>0;const status=useLast([],showStatus?currentStatus:null);const omitTerm=status.length===1&&status[0][0].quarter!=="S3";return v("div",{class:`term-statuses ${showStatus?"":"hide-status"}`,children:status.map((([term,status])=>v("p",{class:`term-updated ${status==="offline"?"term-offline":status==="unavailable"?"term-unavailable":""}`,children:[!omitTerm&&v(W,{children:[v("span",{class:"term-code",children:termCode(term.year,term.quarter)})," "]}),status instanceof Date?v(W,{children:[omitTerm?"Updated ":"last updated ",v("span",{class:"updated-date",children:status.toLocaleDateString()}),"."]}):status==="offline"?"failed to load.":"is unavailable."]},termCode(term.year,term.quarter))))})}function displayError(errors){const offlineErrors=errors.filter((({type:type})=>type==="offline")).map((({request:{year:year,quarter:quarter}})=>termName(year,quarter)));if(offlineErrors.length>0){return`I couldn't load schedules for ${offlineErrors.join(" and ")}. Is ResNet failing you again?`}else{return`Schedules aren't available for ${errors.map((({request:{year:year,quarter:quarter}})=>termName(year,quarter))).join(" and ")}.`}}function App(){const[realTime,setRealTime]=k1(true);const[date,setDate]=k1((()=>now().date));const[time,setTime]=k1((()=>now().time));j1((()=>{if(realTime){const intervalId=setInterval((()=>{const{date:date,time:time}=now();setTime((oldTime=>+oldTime===+time?oldTime:time));setDate((oldDate=>{if(+oldDate===+date){return oldDate}else{handleDate(date);return date}}))}),1e3);return()=>{clearInterval(intervalId)}}}),[realTime]);const termCache=w1(new TermCache);const[state,setState]=k1(null);const noticeVisible=!state?.buildings;const notice=useLast("",state===null?"Loading...":state.buildings?null:state&&state.errors.length>0?displayError(state.errors):state.holiday?`${state.holiday}!`:state.season==="WI"?"Winter break.":state.season==="SP"?"Spring break.":"Summer break.");const[showDatePanel,setShowDatePanel]=k1(false);const[viewing,setViewing]=k1(null);const building=useLast("CENTR",viewing);async function handleDate(date){const{year:year,season:season,current:current,finals:finals}=getTerm(date);const requests=[current?{year:year,quarter:season}:null,season==="S1"||season==="S2"||season==="FA"&&!current?{year:year,quarter:"S3"}:null];const holiday=getHolidays(date.year)[date.id];if(holiday||requests.every((request=>request===null))){setState({errors:[],status:[],season:season,holiday:holiday});setViewing(null);setShowDatePanel(true);return}const terms=requests.filter((request=>request!==null));const rawResults=terms.map((request=>termCache.current.request(request)));let fetchedResults;const allCached=rawResults.every((result=>!(result instanceof Promise)));if(allCached){fetchedResults=rawResults}else{setState(null);fetchedResults=await Promise.all(rawResults)}const successes=[];const errors=[];for(const result of fetchedResults){if("result"in result){successes.push(result)}else{errors.push(result)}}const courses=successes.flatMap((result=>result.result.courses));const finalsWeek=finals&&season!=="S1"&&season!=="S2";const classrooms=coursesToClassrooms(courses,{monday:date.monday,finals:finalsWeek});const empty=Object.keys(classrooms).length===0&&!(finalsWeek&&courses.length>0);setState({buildings:empty?undefined:classrooms,status:[...successes.map((result=>[result.request,result.result.scraped])),...errors.map((error=>[error.request,error.type]))],errors:errors,season:season});if(empty){setViewing(null);setShowDatePanel(true)}}j1((()=>{handleDate(date)}),[]);return v(W,{children:[v("label",{class:`search-wrapper ${noticeVisible?"hide-search":""}`,children:[v(SearchIcon,{}),v("input",{type:"search",placeholder:"Coming soon...",class:"search-input"})]}),v(DateTimeButton,{date:date,time:time,onClick:()=>setShowDatePanel(true),bottomPanelOpen:!!viewing,disabled:showDatePanel}),v(DateTimePanel,{date:date,onDate:date=>{setRealTime(false);setDate(date);handleDate(date)},time:time,onTime:time=>{setRealTime(false);setTime(time)},useNow:realTime,onUseNow:useNow=>{if(useNow){const{date:date,time:time}=now();setRealTime(true);setDate(date);setTime(time);handleDate(date)}else{setRealTime(false)}},visible:showDatePanel,class:`${viewing?"date-time-panel-bottom-panel":""} ${noticeVisible?"date-time-panel-notice-visible":""}`,onClose:()=>setShowDatePanel(false)}),v(TermStatus,{status:state?.status,visible:!noticeVisible}),v("div",{class:"buildings-wrapper",children:[v("p",{class:`notice ${noticeVisible?"notice-visible":""} ${showDatePanel?"notice-date-open":""}`,children:v("span",{class:"notice-text",children:notice})}),v("div",{class:"buildings",children:[v("div",{class:"scroll-area",style:{width:`${northeast.x-southwest.x+50*2}px`,height:`${southwest.y-northeast.y+50*2}px`,backgroundSize:`${mapPosition.width}px`,backgroundPosition:`${mapPosition.x}px ${mapPosition.y}px`}}),Object.values(buildings).map((building=>v(BuildingButton,{weekday:date.day,time:time,building:building,rooms:Object.values(state?.buildings?.[building.code]??{}),onSelect:setViewing,selected:building.code===viewing,visible:!!state?.buildings&&building.code in state.buildings},building.code)))]})]}),v(BuildingPanel,{weekday:date.day,time:time,building:buildings[building],rooms:state?.buildings?.[building]??{},onClose:()=>setViewing(null),visible:viewing!==null,rightPanelOpen:showDatePanel})]})}ce(v(App,{}),document.getElementById("root"));
